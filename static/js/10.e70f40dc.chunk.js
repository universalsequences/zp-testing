(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{2551:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=n(13),o=n(14),s=n.n(o);n(225);t.a=Object(c.b)(function(e,t){t.sequencerEngine,t.id,t.renderLength;return{currentTime:e.freeze.offlineEngine&&e.freeze.offlineEngine.context&&Math.floor(e.freeze.offlineEngine.context._context.currentTime),currentExportInfo:e.freeze.currentExportInfo}},null)(function(e){var t=e.currentTime,n=void 0===t?0:t,r=e.renderLength,c=e.width,o=void 0===c?380:c,i=e.currentExportInfo,u=n/(r*(new s.a.Time("1n").toMilliseconds()/1e3)),l={width:o*u},f=i;return a.a.createElement("div",{className:"progress-bar"},a.a.createElement("div",{className:"inner-progress-bar"},a.a.createElement("div",{className:"progress",style:l}),a.a.createElement("div",{className:"loading-text"},f?"Exporting "+f.name+" "+(f.index+1)+"/"+f.total+" ":"Exporting Project ","(",Math.round(100*u),"%)...")))})},2565:function(e,t,n){"use strict";var r=n(3),a=n(4),c=n(7),o=n(11),s=n(1),i=n(0),u=n.n(i),l=n(13),f=n(44),d=n(84);function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var b=function(e){Object(c.a)(n,e);var t=m(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={clockDragging:!1,clockStartDragY:void 0,clockDragY:void 0},a}return Object(a.a)(n,[{key:"onClockMouseLeave",value:function(e){void 0!=this.seekTimer&&(clearInterval(this.seekTimer),this.seekTimer=void 0)}},{key:"onClockMouseDown",value:function(e){var t=this;void 0!==this.props.sequencerEngine&&(this.state.clockStartDragY=e.clientY,this.seekTimer=setInterval(function(){if(void 0!==t.state.clockDragY){var e=t.state.clockStartDragY-t.state.clockDragY,n=t.props.sequencerEngine.trackStep+5*e;n<0&&(n=0),t.props.sequencerEngine.seekToTrackStep(n)}},50))}},{key:"onClockMouseUp",value:function(e){clearInterval(this.seekTimer),this.seekTimer=void 0}},{key:"onClockMouseMove",value:function(e){this.state.clockDragY=e.clientY}},{key:"onClickMetronome",value:function(){void 0!==this.props.sequencerEngine&&(this.props.sequencerEngine.metronomeOn=!this.props.sequencerEngine.metronomeOn)}},{key:"render",value:function(){var e=this,t=Math.ceil(this.props.currentGlobalStep/32);t=isNaN(t)?1:t;var n=1+Math.floor(this.props.currentGlobalStep/8)%4,r=1+Math.floor(this.props.currentGlobalStep/2)%4,a="clock ";this.props.clockTick&&(a+="percentage-"+this.props.clockTick);var c="metronome";return this.props.metronomeOn&&(this.props.currentGlobalStep/4%4>=2&&(c+=" off-beat"),c+=" on"),u.a.createElement("div",{className:a,onMouseLeave:function(t){return e.onClockMouseLeave(t)},onMouseDown:function(t){return e.onClockMouseDown(t)},onMouseUp:function(t){return e.onClockMouseUp(t)},onMouseMove:function(t){return e.onClockMouseMove(t)}},u.a.createElement("div",{className:"track-time"},t),u.a.createElement("div",{className:"divider"},"."),u.a.createElement("div",{className:"time"},n),u.a.createElement("div",{className:"divider"},"."),u.a.createElement("div",{className:"time"},r),u.a.createElement(d.a,{element:f.P,onClick:function(){return e.onClickMetronome()},className:c},u.a.createElement("div",{className:"dot first"}),u.a.createElement("div",{className:"dot second"})))}}]),n}(i.Component);t.a=Object(l.b)(function(e,t){if(void 0===t.sequencerEngine)return{currentStep:0,currentGlobalStep:0,clockTick:0,metronomeOn:!1};var n=t.sequencerEngine.getSequenceId();return{currentStep:e.sequencer.currentStep[n]||0,currentGlobalStep:e.sequencer.currentGlobalStep[n]||0,clockTick:e.clock.clockTick,metronomeOn:t.sequencerEngine.metronomeOn}},null)(b)},2575:function(e,t,n){},2576:function(e,t,n){},2591:function(e,t,n){"use strict";var r=n(2),a=n.n(r),c=n(12),o=n(3),s=n(4),i=n(18),u=n(7),l=n(11),f=n(1),d=n(85),m=n(5),b=n(0),p=n.n(b),h=n(109),v=n.n(h),g=n(960),E=n(215),O=n(76),j=n(13),w=(n(2576),Object(j.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.sequencerEngine,n=e.onClickCancel,r=Object(b.useState)(""),o=Object(m.a)(r,2),s=o[0],i=o[1],u=Object(b.useState)(8),l=Object(m.a)(u,2),f=l[0],h=l[1],j=Object(b.useState)(.1),w=Object(m.a)(j,2),S=w[0],k=w[1],y=Object(b.useState)(!1),C=Object(m.a)(y,2),q=C[0],x=C[1],N=Object(b.useState)(!1),M=Object(m.a)(N,2),T=(M[0],M[1]),P=Object(b.useCallback)(Object(c.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,Object(g.c)(t,s,f,S*Math.pow(10,18));case 3:T(!0),x(!1);case 5:case"end":return e.stop()}},e)})),[S,s,f,x,T]);return p.a.createElement(d.a,{dialogClassName:"mint-modal preset-modal render-modal",show:!0,onHide:n},p.a.createElement(d.a.Header,{closeButton:!0},p.a.createElement(d.a.Title,null,"Mint NFT")),p.a.createElement(d.a.Body,null,q?p.a.createElement(E.a,{text:"Minting your nft"}):p.a.createElement("div",null,p.a.createElement("input",{placeholder:"Title your work",value:s,type:"text",onChange:function(e){return i(e.target.value)}}),p.a.createElement("div",{className:"editions"},p.a.createElement("div",{className:"value"},"Editions: ",f),p.a.createElement(v.a,{value:f,change:function(e){return h(e.target.value)},step:1,max:1e3,min:1,orientation:"horizontal",reversed:!1})),p.a.createElement("div",{className:"price"},p.a.createElement("div",{className:"value"},"Price: ",S," eth"),p.a.createElement(v.a,{value:S,change:function(e){return k(e.target.value)},step:.001,max:1,min:.001,orientation:"horizontal",reversed:!1})))),p.a.createElement(d.a.Footer,null,p.a.createElement(O.b,{variant:"secondary",onClick:P},"Mint!"),p.a.createElement(O.b,{variant:"primary",onClick:n},"Cancel")))})),S=n(10),k=n(9),y=n(33);function C(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw c}}}}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var x=function(){var e=Object(c.a)(a.a.mark(function e(){var t,n,r,c,o,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.encryption.getPotentialUsers();case 2:t=e.sent,[],n=[],r=C(t),e.prev=6,r.s();case 8:if((c=r.n()).done){e.next=16;break}return o=c.value,e.next=12,y.a.users.getUserName(o);case 12:(s=e.sent)&&""!==s&&n.push({id:o,userName:s});case 14:e.next=8;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),r.e(e.t0);case 21:return e.prev=21,r.f(),e.finish(21);case 24:return console.log("USERS =",n),e.abrupt("return",n);case 26:case"end":return e.stop()}},e,null,[[6,18,21,24]])}));return function(){return e.apply(this,arguments)}}(),N=Object(j.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.onSharedWithChanged,n=(e.guildId,Object(b.useState)("")),r=Object(m.a)(n,2),a=r[0],c=r[1],o=Object(b.useState)([]),s=Object(m.a)(o,2),i=s[0],u=s[1],l=Object(b.useState)([]),f=Object(m.a)(l,2),d=f[0],h=f[1],v=Object(b.useState)([]),g=Object(m.a)(v,2),E=g[0],O=g[1];Object(b.useEffect)(function(){},[u]),Object(b.useEffect)(function(){t(i)},[i]),Object(b.useEffect)(function(){x().then(function(e){return h(e)})},[h]);var j=Object(b.useCallback)(function(e){u([].concat(Object(k.a)(i),[e])),c(""),O([])},[i,u,O]),w=Object(b.useCallback)(function(e){"Enter"===e.key&&j(a)},[u,a,i]);Object(b.useEffect)(function(){if(""===a.trim())O([]);else{var e=d.filter(function(e){return e.userName.toLowerCase().includes(a.toLowerCase())});O(e)}},[a,O]);var S=Object(b.useCallback)(function(e){u(i.filter(function(t){return t!==e}))},[u,i]);return p.a.createElement("div",{className:"share-with-people"},p.a.createElement("div",{className:"people-input-container"},i.map(function(e){return p.a.createElement("div",{className:"shared-user"},e,p.a.createElement("div",{onClick:function(){return S(e)},className:"delete-user"},"x"))}),p.a.createElement("input",{placeholder:"Type collaborators to share this with",className:"people-input",value:a,type:"text",onKeyDown:w,onChange:function(e){return c(e.target.value)}})),p.a.createElement("div",{className:"auto-completion-users"},E.map(function(e){return p.a.createElement("div",{onClick:function(){return j(e.userName)},className:"auto-completed-user"},e.userName)})))}),M=n(87);function T(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw c}}}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var L=function(e){return new Promise(function(){var t=Object(c.a)(a.a.mark(function t(n){var r,c,o,s,i,u,l,f,d,m,b;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=y.a.users,c=y.a.guilds,o=void 0,s=Object(k.a)(e),t.t0=e,t.next=6,r.getUserName();case 6:t.t1=t.sent,t.t0.push.call(t.t0,t.t1),i=T(e),t.prev=9,i.s();case 11:if((u=i.n()).done){t.next=23;break}return l=u.value,t.next=15,r.getUserId(l);case 15:return f=t.sent,t.next=18,c.getGuildsForUser(f);case 18:d=t.sent,d=new Set(d.map(function(e){return e.guildId})),o=void 0===o?d:R(o,d);case 21:t.next=11;break;case 23:t.next=28;break;case 25:t.prev=25,t.t2=t.catch(9),i.e(t.t2);case 28:return t.prev=28,i.f(),t.finish(28);case 31:if(o=Array.from(o),m=void 0,0!==o.length){t.next=40;break}return t.delegateYield(a.a.mark(function t(){var o,i,u,l,f,d,b;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.join(","),t.next=3,c.newGuild(o);case 3:i=t.sent;case 4:return t.next=7,c.getGuildsForUser();case 7:if(u=t.sent,console.log("GUILDS found =",u),!(m=u.find(function(e){return e.name===o}))){t.next=13;break}return m=m.guildId,t.abrupt("break",17);case 13:return t.next=15,Object(M.a)(2e3);case 15:t.next=4;break;case 17:c.saveGuildKey(m,i),n(m),l=T(s),t.prev=20,l.s();case 22:if((f=l.n()).done){t.next=31;break}return d=f.value,t.next=26,r.getUserId(d);case 26:return b=t.sent,t.next=29,c.requestToAddMember(m,b);case 29:t.next=22;break;case 31:t.next=36;break;case 33:t.prev=33,t.t0=t.catch(20),l.e(t.t0);case 36:return t.prev=36,l.f(),t.finish(36);case 39:return t.abrupt("return",{v:void 0});case 40:case"end":return t.stop()}},t,null,[[20,33,36,39]])})(),"t3",35);case 35:if("object"!==typeof(b=t.t3)){t.next=38;break}return t.abrupt("return",b.v);case 38:t.next=41;break;case 40:m=o[0];case 41:n(m);case 42:case"end":return t.stop()}},t,null,[[9,25,28,31]])}));return function(e){return t.apply(this,arguments)}}())},R=function(e,t){var n,r=[],a=T(e);try{for(a.s();!(n=a.n()).done;){var c=n.value;t.has(c)&&r.push(c)}}catch(u){a.e(u)}finally{a.f()}var o,s=T(t);try{for(s.s();!(o=s.n()).done;){var i=o.value;e.has(i)&&r.push(i)}}catch(u){s.e(u)}finally{s.f()}return new Set(r)},D=n(2551),I=n(292);function A(e){var t=e.sequencerEngine,n=(e.selectedGuild,t.getAllRecordingsToSave().length);return 0===n?p.a.createElement("div",null):p.a.createElement("div",{className:"save-recordings"},"You have ",n," new sounds to",p.a.createElement("span",{onClick:function(){return t.saveAnyNewRecordings(0)},className:"save-recordings-button"},"save"),".")}n(1493),n(55);var z=n(45),F=n(263);function B(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var G=function(e){Object(u.a)(n,e);var t=B(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={sequenceHash:void 0,creatingLink:!1},r}return Object(s.a)(n,[{key:"getLink",value:function(){return window.explore?"https://zequencer.io/explore/"+this.state.sequenceHash:"https://zequencer.io/v3/"+this.state.sequenceHash}},{key:"copyLink",value:function(){var e=this,t=this.linkInput;t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),this.setState({copied:!0}),setTimeout(function(){return e.setState({copied:!1})},1e3)}},{key:"createLink",value:function(){var e=Object(c.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({creatingLink:!0}),e.next=3,this.props.sequencerEngine.save(void 0,F.c,!1);case 3:t=e.sent,this.setState({sequenceHash:t,creatingLink:!1});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"exportToWAV",value:function(){Object(I.a)(this.props.sequencerEngine)}},{key:"render",value:function(){var e=this;return p.a.createElement("div",{className:"link-creator"},p.a.createElement(z.a,{condition:void 0===this.state.sequenceHash},p.a.createElement("div",{onClick:function(){return e.createLink()},className:"link-button"},"Create Public Link")),p.a.createElement(z.a,{condition:void 0!==this.state.sequenceHash},p.a.createElement("div",null,"Link: ",p.a.createElement("input",{type:"text",value:this.getLink(),id:"linkInput",ref:function(t){e.linkInput=t}})),p.a.createElement("div",{onClick:function(){return e.copyLink()},className:"small-button pink-button"},"Copy Link"),p.a.createElement("div",{className:"clear-fix"}),p.a.createElement(z.a,{condition:this.state.copied},p.a.createElement("div",{className:"copied-info"},"Copied to clipboard!"))),p.a.createElement("div",{onClick:function(){return e.props.onClickExport()},className:"link-button export-to-wav-btn"},"Export to WAV"))}}]),n}(b.Component),H=n(1492),U=(n(225),n(1494),n(291),n(63)),W=(n(1495),n(281),n(44)),Z=(n(708),n(964));function _(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var V=function(e){Object(u.a)(n,e);var t=_(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={nameValue:"",numTokens:1,saveOption:F.b,metamaskInstalled:!0,showBuying:!1,sequenceHash:void 0,copied:!1,selectedGuild:void 0,guildOptions:[],renderLength:64,mintNFT:!1,renderOption:Z.b,shareWith:[],formingGuild:!1},r.input=void 0,r.onClickDone=r.onClickDone.bind(Object(i.a)(r)),r.onClickCancel=r.onClickCancel.bind(Object(i.a)(r)),r.onClickExport=r.onClickExport.bind(Object(i.a)(r)),y.a.tokenizedSequences.callback=function(){return r.onBalanceUpdated()},r}return Object(s.a)(n,[{key:"shouldComponentUpdate",value:function(e){return e.show&&e.show!==this.props.show&&this.getGuilds(),e.show||e.show===this.props.show||(this.state.sequenceHash=void 0,this.state.copied=!1),!0}},{key:"getGuilds",value:function(){var e=Object(c.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.guilds.getGuildsForUser();case 2:t=e.sent,void 0!==this.props.selectedGuild&&this.setState({saveOption:F.a}),this.setState({selectedGuild:this.props.selectedGuild||t[0],guildOptions:t.filter(function(e){return e.name.split(",").length<2})});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){var t=this;if(this.props.show!=e.show){this.input&&this.input.focus();var n=this.props.sequencerEngine.sequenceId;0===n&&-1===n&&void 0===n||y.a.guildSequences.getGuildSequence(n).then(function(e){e?(console.log("GUILD SEQUENCE =",e),t.setState({sequenceGuildId:e.guildId})):t.setState({sequenceGuildId:void 0})})}return!0}},{key:"onClickDone",value:function(){var e=Object(c.a)(a.a.mark(function e(){var t,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({showExportMode:!1}),!this.state.showBuying){e.next=6;break}y.a.tokenizedSequences.buyTokens(parseInt(this.state.numTokens)),this.setState({onPurchased:!0,showBuying:!1}),e.next=18;break;case 6:if(t=this.state.shareWith,n=void 0,!(this.state.saveOption===F.b&&t.length>0)){e.next=17;break}return this.setState({formingGuild:!0}),e.next=12,L(t);case 12:n=e.sent,this.setState({formingGuild:!1}),this.props.onSave(this.state.nameValue,F.a,{guildId:n}),e.next=18;break;case 17:this.props.onSave(this.state.nameValue,this.state.saveOption,this.state.selectedGuild);case 18:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onClickCancel",value:function(){if(this.state.showBuying)this.setState({showBuying:!1});else{this.setState({showExportMode:!1,mintNFT:!1}),this.props.onHide();var e=this.props.sequencerEngine.state.freeze.offlineEngine;console.log("OFFLINE ENGINE =",e),e&&(console.log("SUSPENDING"),e.stop(),e.context._context.suspend(e.context._context.currentTime+.5).then(function(){console.log("DISPOSING"),e.dispose()}))}}},{key:"onInputType",value:function(e){this.setState({nameValue:e})}},{key:"handleCheckboxChange",value:function(e){this.setState({saveOption:e.target.name})}},{key:"onTokenType",value:function(e){""===e&&this.setState({numTokens:0}),Object(U.a)(e)&&this.setState({numTokens:e})}},{key:"onSelectGuild",value:function(e){this.setState({selectedGuild:e})}},{key:"showExportMode",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setState({showExportMode:e})}},{key:"onClickExport",value:function(){var e=this;this.setState({bouncing:!0}),setTimeout(Object(c.a)(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(I.a)(e.props.sequencerEngine,e.state.renderLength,e.state.renderOption);case 2:e.setState({bouncing:!1}),e.onClickCancel(),e.onClickCancel();case 5:case"end":return t.stop()}},t)})),80)}},{key:"onChangeRenderLength",value:function(e){try{var t=parseInt(e);this.setState({renderLength:t})}catch(n){}}},{key:"login",value:function(){this.props.setShowLogin(!0)}},{key:"render",value:function(){var e=this;return this.state.mintNFT?p.a.createElement(w,{onClickCancel:function(){return e.onClickCancel()},sequencerEngine:this.props.sequencerEngine}):this.state.showExportMode?p.a.createElement(d.a,{dialogClassName:"preset-modal render-modal",show:this.props.show,onHide:this.onClickCancel},p.a.createElement(d.a.Header,{closeButton:!0},p.a.createElement(d.a.Title,null,"Export Project")),p.a.createElement(d.a.Body,null,p.a.createElement("div",{className:"render-options"},p.a.createElement("div",{className:"render-label"},"Rendered Track"),p.a.createElement("div",{onClick:function(){return e.setState({renderOption:Z.b})},className:this.state.renderOption===Z.b?"selected render-option":"render-option"},"Master"),p.a.createElement("div",{onClick:function(){return e.setState({renderOption:Z.a})},className:this.state.renderOption===Z.a?"selected render-option":"render-option"},"Groups")),p.a.createElement("div",{className:"render-length"},p.a.createElement("div",{className:"render-label"},"Render Length"),p.a.createElement("input",{onChange:function(t){return e.onChangeRenderLength(t.target.value)},className:"render-length-input",value:this.state.renderLength})),this.state.bouncing?p.a.createElement(D.a,{renderLength:this.state.renderLength}):""),p.a.createElement(d.a.Footer,null,this.state.bouncing?"":p.a.createElement(O.b,{variant:"secondary",onClick:this.onClickExport},"Export"),this.state.bouncing?"":p.a.createElement(O.b,{variant:"primary",onClick:this.onClickCancel},"Cancel"))):this.props.userToken?p.a.createElement(d.a,{dialogClassName:"preset-modal",show:this.props.show,onHide:this.onClickCancel},p.a.createElement(d.a.Header,{closeButton:!0},p.a.createElement(d.a.Title,null,"Save Project")),p.a.createElement(d.a.Body,null,p.a.createElement("input",{value:this.state.nameValue,onChange:function(t){return e.onInputType(t.target.value)},ref:function(t){e.input=t},placeholder:"Type name of project",className:"tag-input"}),p.a.createElement("form",null,p.a.createElement("input",{name:F.c,type:"checkbox",checked:this.state.saveOption===F.c,onChange:function(t){return e.handleCheckboxChange(t)}}),p.a.createElement("label",{onMouseOver:function(){return e.props.setContextualHelp(W.lb)},onMouseLeave:function(){return e.props.setContextualHelp(void 0)}},"Public"),p.a.createElement("input",{name:F.b,value:F.b,type:"checkbox",checked:this.state.saveOption===F.b,onChange:function(t){return e.handleCheckboxChange(t)}}),p.a.createElement("label",{onMouseOver:function(){return e.props.setContextualHelp(W.jb)},onMouseLeave:function(){return e.props.setContextualHelp(void 0)}},"Private"),p.a.createElement("input",{name:F.a,value:F.a,type:"checkbox",checked:this.state.saveOption===F.a,onChange:function(t){return e.handleCheckboxChange(t)}}),p.a.createElement("label",{onMouseOver:function(){return e.props.setContextualHelp(W.jb)},onMouseLeave:function(){return e.props.setContextualHelp(void 0)}},"Guild")),p.a.createElement(A,{selectedGuild:this.state.selectedGuild,sequencerEngine:this.props.sequencerEngine}),p.a.createElement(z.a,{condition:this.state.saveOption===F.b},p.a.createElement(N,{guildId:this.state.sequenceGuildId,onSharedWithChanged:function(t){return e.setState({shareWith:t})}}),this.state.formingGuild?p.a.createElement(E.a,{text:"Creating encrypted group"}):""),p.a.createElement(z.a,{condition:this.state.saveOption===F.a},p.a.createElement(H.a,{onSelectGuild:function(t){return e.onSelectGuild(t)},selectedGuild:this.state.selectedGuild,guildOptions:this.state.guildOptions})),p.a.createElement(G,{onClickMint:function(){return e.setState({mintNFT:!0})},onClickExport:function(){return e.showExportMode(!0)},sequencerEngine:this.props.sequencerEngine})),this.state.formingGuild?"":p.a.createElement(d.a.Footer,null,p.a.createElement(O.b,{variant:"secondary",onClick:this.onClickDone},"Save"),p.a.createElement(O.b,{variant:"primary",onClick:this.onClickCancel},"Cancel"))):p.a.createElement(d.a,{dialogClassName:"preset-modal save-modal",show:this.props.show,onHide:this.onClickCancel},p.a.createElement(d.a.Header,{closeButton:!0},p.a.createElement(d.a.Title,null,"Save Sequence")),p.a.createElement(d.a.Body,null,p.a.createElement("div",{className:"no-metamask"},p.a.createElement("span",{onClick:function(){return e.login()},className:"login-btn"},"Login")," to save your song to your account."),p.a.createElement(G,{onClickMint:function(){return e.setState({mintNFT:!0})},onClickExport:function(){return e.showExportMode(!0)},sequencerEngine:this.props.sequencerEngine})),p.a.createElement(d.a.Footer,null,p.a.createElement(O.b,{variant:"secondary",onClick:this.onClickCancel},"Done")))}}]),n}(b.Component);t.a=Object(j.b)(function(e){return{selectedGuild:e.guilds.selectedGuild,userToken:e.sequencer.userToken}},function(e){return{setShowLogin:function(t){return e(Object(S.Vf)(t))},setContextualHelp:function(t){return e(Object(S.wb)(t))}}})(V)},2600:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=n(84),o=n(44),s=n(13),i=n(10);t.a=Object(s.b)(function(e,t){return{rolling:e.sequencer.trackRolling,quantized:e.sequencer.quantized}},function(e){return{setTrackRolling:function(t){return e(Object(i.lh)(t))},setQuantized:function(t){return e(Object(i.Be)(t))}}})(function(e){var t=e.rolling,n=e.setTrackRolling,r=e.quantized,s=e.setQuantized;return a.a.createElement("div",{className:"live-buttons"},a.a.createElement(c.a,{onClick:function(){return n(!t)},className:t?"live-button selected":"live-button",element:o.wb},a.a.createElement("img",{className:"roll-icon",src:"/roll-light.png"})),a.a.createElement(c.a,{onClick:function(){return s(!r)},className:r?"live-button":"live-button selected",element:o.mb},a.a.createElement("img",{className:"quantize-btn",src:r?"/quantized.svg":"/unquantized.svg"})))})},2601:function(e,t,n){"use strict";var r=n(3),a=n(4),c=n(7),o=n(11),s=n(1),i=n(0),u=n.n(i),l=n(13),f=n(105),d=n(44),m=n(84),b=n(10);function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var h=["A","B","C","D","E","F","G","H","I","J","K","L","M","N"],v=function(e){Object(c.a)(n,e);var t=p(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"chooseSubSequence",value:function(e){this.props.viewMode!==f.e&&this.props.viewMode!==f.c||this.props.setViewMode(f.d),this.props.sequencerEngine.switchToSubSequence(e)}},{key:"newSubSequence",value:function(){this.props.viewMode!==f.e&&this.props.viewMode!==f.c||this.props.setViewMode(f.d),this.props.sequencerEngine.newSubSequence()}},{key:"deleteSubSequence",value:function(){window.confirm("Are you sure you want to delete this SUB SEQUENCE?")&&this.props.sequencerEngine.deleteSubSequence()}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"sub-sequences-container"},this.props.subSequences.filter(function(t){return!e.props.sequencerEngine.getSubSequence(t).isTrack}).map(function(t,n){return u.a.createElement(m.a,{element:d.q,key:h[n],onClick:function(){return e.chooseSubSequence(t)},className:t===e.props.currentSubSequence?"sub-sequence selected":"sub-sequence"},h[n])}),u.a.createElement(m.a,{element:d.T,onClick:function(){return e.newSubSequence()},className:"new-sub-sequence"},"+"),u.a.createElement(m.a,{element:d.s,onClick:function(){return e.deleteSubSequence()},className:"delete-sub-sequence"},"-"))}}]),n}(i.Component);t.a=Object(l.b)(function(e,t){var n=t.sequencerEngine.engineId;return{subSequences:e.sequencer.subSequences[n]||[],currentSubSequence:e.sequencer.currentSubSequence[n],viewMode:e.sequencer.viewMode}},function(e){return{setViewMode:function(t){return e(Object(b.Jh)(t))}}})(v)},2648:function(e,t,n){},2649:function(e,t,n){},2650:function(e,t,n){},2651:function(e,t,n){},2652:function(e,t,n){},2653:function(e,t,n){},2654:function(e,t,n){},2655:function(e,t,n){},2778:function(e,t,n){"use strict";n.r(t);var r=n(5),a=n(0),c=n.n(a),o=n(103),s=n(2643),i=n(2590),u=n(2644),l=n(1159),f=n(520),d=n(13),m=Object(d.b)(function(e,t){return{}},function(e){return{}})(function(e){Object(l.a)(e);var t=Object(a.useState)(0),n=Object(r.a)(t,2),o=n[0],s=n[1],i=Object(a.useCallback)(function(){window.fps&&s(window.fps)},[s]);return Object(f.a)(i,500),c.a.createElement("div",{className:"frames-per-second"},Math.round(o)," F.P.S.")}),b=n(43),p=n(2693),h=n(105),v=n(2623),g=n(2701),E=n(2624),O=n(1496),j=n(1141),w=n(9),S=n(77),k=n(10),y=function(e,t){var n=[],r=e;for(r&&r.subSequence&&r.subSequence.zObject&&n.push(r);r&&r.subSequence&&r.subSequence.zObject;)r=r.subSequence.zObject,n.push(r);0===n.length&&(n=[e]);var a=n.map(function(e,n){return e.message?e._text:e.zObject&&"comment"===e.zObject.name?C(t,e.text):"subpatch"===e.name&&e.args[0]&&""!==e.args[0].trim()?e.args[0]:e.name});return{tree:n,list:a}},C=function(e,t){var n=t.indexOf(e);return"..."+t.slice(n,n+12)+"..."},q=(n(2648),Object(d.b)(function(e,t){return{recentSubPatches:e.zobject.recentSubPatches}},function(e){return{setViewableSubPatches:function(t){return e(Object(k.Kh)(t))}}})(function(e){var t=e.recentSubPatches,n=e.setViewableSubPatches,o=e.clear,s=Object(a.useState)(-1),i=Object(r.a)(s,2),u=i[0],l=i[1],f=Object(a.useCallback)(function(e){var t=e.sequencerEngine.state.zobject.viewableSubPatches;n([].concat(Object(w.a)(t),[e])),o()},[]);Object(a.useEffect)(function(){return window.addEventListener("keydown",d),function(){return window.removeEventListener("keydown",d)}},[l,u]);var d=Object(a.useCallback)(function(e){var n=t.length;if("ArrowDown"===e.key)u=Object(S.a)(u+1,Math.min(10,n)),l(u);else if("ArrowUp"===e.key)u=Object(S.a)(u-1,Math.min(10,n)),l(u);else if("Enter"===e.key){var r=t[u];r&&f(r)}},[l,u,t]);return 0===t.length?"":c.a.createElement("div",{className:"recent-subpatches"},c.a.createElement("div",{className:"recent-title"},"Recently opened"),t.slice(0,10).map(function(e,t){return c.a.createElement("div",{onClick:function(){return f(e)},className:t===u?"recent selected":"recent"},c.a.createElement("img",{src:"/subpatch-light.svg"}),y(e.zObject,"").list.map(function(e,t){return c.a.createElement("span",{className:0===t?"main-name":""},e)}))}))})),x=Object(d.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.setMode;return c.a.createElement("div",{className:"quick-actions"},c.a.createElement("div",{onClick:function(){return t("RECENT_SAMPLES")},className:"pushable action"},"Recent Samples"),c.a.createElement("div",{onClick:function(){return t("ALL_SAMPLES")},className:"pushable action"},"All Samples"))}),N=(n(2649),Object(d.b)(function(e,t){return{}},function(e){return{setFullScreenZObject:function(t){return e(Object(k.tc)(t))}}})(function(e){var t=e.zobject,n=e.setFullScreenZObject,o=Object(a.useState)(!1),s=Object(r.a)(o,2),i=s[0],u=s[1],l=Object(a.useCallback)(function(){var e=t.sequencerEngine.state.zobject.fullScreenZObject;n(e?Array.isArray(e)?[].concat(Object(w.a)(e),[t]):[e,t]:t)},[t]);return c.a.createElement("div",{className:"zobject-command"},c.a.createElement("div",{onClick:function(){return u(!i)},className:"collapse-btn"},c.a.createElement("div",{className:i?"arrow-up":"arrow-down"})),i&&c.a.createElement("div",{className:"command-menu"},c.a.createElement("div",{onClick:l,className:"command-option"},"Add to Full-Screen")))})),M=n(450),T=n(2695),P=Object(d.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.mode,n=e.searchTerm,r=(e.selector,e.sequencerEngine);return c.a.createElement("div",null,c.a.createElement(T.a,{defaultGroupBy:"RECENT_SAMPLES"===t?M.a:M.d,quickAddSearchText:n,sequencerEngine:r}))}),L=n(94),R=n(217),D=n(2),I=n.n(D),A=n(12),z=n(264),F=n(218),B=n(748),G=n(106),H=(n(138),n(154)),U=n(203),W=n(640),Z=["Multiband Compressor","Flam","Max","Poly","First","Last","Staccato","Dot","Dash 1","Dash 2","Rest","Otherwise","Accent","Legato","R.Every","Double","Later","Regular","Flat","Thick","Split","Piano","Pianissimo"],_=Object.keys,V=(Object.values,function(e,t){return t=t.toLowerCase(),_(e).filter(function(e){return e.toLowerCase().includes(t)}).filter(function(e){return!Z.includes(e)})}),X=function(){var e=Object(A.a)(I.a.mark(function e(t,n){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=V(Object(H.a)(),t),e.t1=V(U.b,t),e.t2=V(W.b,t),e.t3=Y(t,n),e.next=6,J(t,n);case 6:return e.t4=e.sent,e.next=9,K(t,n);case 9:return e.t5=e.sent,e.abrupt("return",{AUDIO_FX:e.t0,MIDI_FX:e.t1,LIVE_FX:e.t2,OBJECTS:e.t3,SAMPLES:e.t4,SYNTHS:e.t5});case 11:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),Y=function(e,t){var n=Object(z.a)(t.currentSubSequence,!0);return e=e.toLowerCase(),n.filter(function(t){return"string"===typeof t.name&&t.name.toLowerCase().includes(e)||t.args&&"string"===typeof t.args[0]&&t.args[0].toLowerCase().includes(e)||t.text&&"string"===typeof t.text&&t.text.toLowerCase().includes(e)||t._text&&"string"===typeof t._text&&t._text.toLowerCase().includes(e)||t.text&&"number"===typeof t.text&&t.text.toString().includes(e)}).filter(function(e){return!e.getObjectType||e.getObjectType()!==G.a})},J=function(){var e=Object(A.a)(I.a.mark(function e(t,n){var r;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(B.b)(t);case 2:return r=e.sent,e.next=5,n.searcher.freeTextSearch(t);case 5:return e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),K=function(){var e=Object(A.a)(I.a.mark(function e(t,n){var r;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(F.c)(void 0,"MULTI_SYNTH",[],0,8359897,!1,void 0,t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),Q=(n(2575),function(e){var t=e.name,n=(e.onClick,e.results),r=e.priorLength,a=void 0===r?0:r,o=e.cursor,s=e.setCursor,i=e.term,u=e.scrollRef;return n&&0!==n.length?[c.a.createElement("div",{className:"type-name"},t)].concat(Object(w.a)(n.map(function(e,n){return c.a.createElement($,{type:t,onClick:function(){return s(n+a)},isCursor:n+a===o,x:e,scrollRef:u,term:i})}))):""}),$=function(e){var t=e.isCursor,n=e.type,r=e.x,o=e.term,s=e.scrollRef,i=e.onClick,u=Object(a.useRef)();return Object(a.useEffect)(function(){if(t){var e=u.current.offsetTop+50,n=s.current.scrollTop;e>n+s.current.offsetHeight&&s.current.scrollTo(0,e-130),e>141&&e-150<n&&s.current.scrollTo(0,e-130)}},[t]),c.a.createElement("div",{onClick:i,ref:u,className:t?"cursor result flex":"result flex"},"Samples"===n?c.a.createElement("img",{src:"/waveform-icon.svg"}):n.includes("FX")?c.a.createElement("img",{src:"/effects-icon.svg"}):"Synth Presets"===n?c.a.createElement("img",{src:"/synth-icon.svg"}):"","string"===typeof r?r:"Synth Presets"===n?r.title:c.a.createElement(ee,{isCursor:t,term:o,zobject:r}))},ee=function(e){var t=e.zobject,n=e.term,r=e.isCursor,a=y(t,n),o=a.tree,s=a.list,i=void 0;if("script"===t.name){var u=t.effect.outlets[Object.keys(t.effect.outlets)[0]];u&&(u.connections.some(function(e){return"fragment shader"===e.destType})?i="fragment shader":u.connections.some(function(e){return"vertex shader"===e.destType})&&(i="vertex shader"))}return t.args&&"string"===typeof t.args[0]&&!i&&(i=t.args[0]),c.a.createElement("div",{className:"zobject-preview"},t.message?c.a.createElement("img",{className:"object-icon",src:t.type===L.c?"/znumber-light.svg":"/zmessage-light.svg"}):t.zObject&&"comment"===t.zObject.name?c.a.createElement("img",{className:"object-icon",src:"/zcomment-light.svg"}):"subpatch"===t.name?c.a.createElement("img",{className:"object-icon",src:"/subpatch-light.svg"}):c.a.createElement("img",{className:"object-icon",src:"/zobject-light.svg"}),o.map(function(e,t){return c.a.createElement("div",{key:t,className:t>0?"tree-part spatch":"main-part tree-part"},s[t])}),i&&c.a.createElement("div",{className:"custom-type"},i),r&&c.a.createElement(N,{zobject:t}))},te=function(e){return e?e.length:0},ne=Object(d.b)(function(e,t){return{}},function(e){return{setWindowPosition:function(t,n){return e(Object(k.Qh)(t,n))},setViewableZObjects:function(t){return e(Object(k.Lh)(t))},setShowEditorBottom:function(t){return e(Object(k.Nf)(t))},setViewableSubPatches:function(t){return e(Object(k.Kh)(t))},setFullScreenZObject:function(t){return e(Object(k.tc)(t))}}})(function(e){var t=e.searchTerm,n=e.sequencerEngine,o=e.hide,s=e.inputRef,i=e.setShowEditorBottom,u=e.setWindowPosition,l=e.setViewableZObjects,f=e.setViewableSubPatches,d=e.setFullScreenZObject,m=Object(a.useState)({}),b=Object(r.a)(m,2),p=b[0],h=b[1],v=Object(a.useState)(0),g=Object(r.a)(v,2),E=g[0],O=g[1],j=Object(a.useState)(!1),S=Object(r.a)(j,2),k=S[0],y=S[1],C=Object(a.useRef)(void 0),q=Object(a.useRef)(0);Object(a.useEffect)(function(){if(""===t)h({});else{var e=Y(t,n);h({OBJECTS:e});var r=++q.current;setTimeout(function(){r===q.current&&X(t,n).then(function(e){return h(e)})},200)}},[t,h]),Object(a.useEffect)(function(){O(0)},[p,O]);var x=Object(a.useCallback)(function(){return te(p.AUDIO_FX)+te(p.MIDI_FX)+te(p.LIVE_FX)+te(p.OBJECTS)+te(p.SAMPLES)+te(p.SYNTHS)},[p]);Object(a.useEffect)(function(){return window.addEventListener("keydown",N),function(){return window.removeEventListener("keydown",N)}},[p,k,E,O,o,y]);var N=Object(a.useCallback)(function(e){if(k)"ArrowLeft"===e.key&&y(!1);else{if("ArrowUp"===e.key)return e.preventDefault(),L(),!1;if("ArrowDown"===e.key)return e.preventDefault(),T(),!1;if("Enter"===e.key)return e.preventDefault(),M(p,E,e.metaKey||e.ctrlKey),!1;if("Escape"===e.key){if(n.state.zobject.viewableSubPatches.length>0||n.state.zobject.viewableZObjects.length>0)return;return e.preventDefault(),o(),!1}"ArrowRight"===e.key&&M(p,E,!1,!0)}},[p,E,O,o,y,k]);Object(a.useEffect)(function(){k&&s.current.blur()},[k]);var M=Object(a.useCallback)(function(e,t,r,a){var c=e.OBJECTS||[],s=e.AUDIO_FX||[],m=e.MIDI_FX||[],b=e.LIVE_FX||[],p=e.SAMPLES||[],h=e.SYNTHS||[],v=[].concat(Object(w.a)(c),Object(w.a)(s),Object(w.a)(m),Object(w.a)(b),Object(w.a)(p),Object(w.a)(h)),g=([].concat(Object(w.a)(c),Object(w.a)(s),Object(w.a)(m),Object(w.a)(b)),v[t]);if(g)if(te([].concat(Object(w.a)(c),Object(w.a)(s),Object(w.a)(m),Object(w.a)(b)))<=t&&te([].concat(Object(w.a)(c),Object(w.a)(s),Object(w.a)(m),Object(w.a)(b),Object(w.a)(p)))>t){if(a)return void y(g);r?n.scripting.runScript("/"+g+"/"):n.scripting.runScript("/"+g)}else if(t>=te([].concat(Object(w.a)(c),Object(w.a)(s),Object(w.a)(m),Object(w.a)(b),Object(w.a)(p))))r?n.auditionPreset(g,n.getSelectedTrack().trackNumber):n.loadPreset(g,!0);else if(te([].concat(Object(w.a)(c),Object(w.a)(s),Object(w.a)(m),Object(w.a)(b)))>t&&t>=te(c))n.scripting.runScript("+"+g),i(R.a);else{var E=n.state.zobject.fullScreenZObject;if(E&&"three.canvas"!==E.name&&("subpatch"!==g.name||g.effect.isCustom))if(Array.isArray(E))d([].concat(Object(w.a)(E),[g.zObject||g]));else{var O=[E,g.zObject||g];d(O)}else if("subpatch"!==g.name||g.effect.isCustom)if(g.zObject&&(g=g.zObject),g.effect){var j=n.state.zobject.viewableZObjects;u({x:100,y:100}),l([].concat(Object(w.a)(j),[g]))}else{g.subSequence;var S=n.state.zobject.viewableSubPatches;u({x:100,y:100}),f([].concat(Object(w.a)(S),[g.subSequence]))}else{var k=n.state.zobject.viewableSubPatches;u({x:100,y:100}),f([].concat(Object(w.a)(k),[g.effect]))}}o()},[o,y]),T=Object(a.useCallback)(function(){O(Math.min(E+1,x()-1))},[p,E,O]),L=Object(a.useCallback)(function(){0===E&&s.current.blur(),O(Math.max(0,E-1))},[E,O]);return Object(a.useEffect)(function(){y(!1)},[t,y]),k?c.a.createElement(P,{searchTerm:k,sequencerEngine:n}):c.a.createElement("div",{ref:C,className:""===t?"search-results empty":"search-results"},c.a.createElement(Q,{scrollRef:C,cursor:E,term:t,name:"Objects (in project)",setCursor:O,results:p.OBJECTS}),c.a.createElement(Q,{scrollRef:C,cursor:E,term:t,name:"Create Audio FX",priorLength:te(p.OBJECTS),setCursor:O,results:p.AUDIO_FX}),c.a.createElement(Q,{scrollRef:C,cursor:E,term:t,priorLength:te(p.OBJECTS)+te(p.AUDIO_FX),setCursor:O,name:"Create Midi FX",results:p.MIDI_FX}),c.a.createElement(Q,{scrollRef:C,cursor:E,term:t,setCursor:O,priorLength:te(p.OBJECTS)+te(p.AUDIO_FX)+te(p.MIDI_FX),name:"Create Live FX",results:p.LIVE_FX}),c.a.createElement(Q,{scrollRef:C,cursor:E,term:t,priorLength:te(p.AUDIO_FX)+te(p.MIDI_FX)+te(p.OBJECTS)+te(p.LIVE_FX),name:"Samples",setCursor:O,results:p.SAMPLES}),c.a.createElement(Q,{scrollRef:C,cursor:E,term:t,name:"Synth Presets",setCursor:O,priorLength:te(p.AUDIO_FX)+te(p.MIDI_FX)+te(p.OBJECTS)+te(p.SAMPLES)+te(p.LIVE_FX),results:p.SYNTHS}))}),re=n(707),ae=n(8),ce=n(67);function oe(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return se(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw c}}}}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ie=function(e,t){var n=Object(a.useCallback)(function(t){return e.dispatch(t)},[e]),r=function(){n(Object(k.b)())};return{onDrop:Object(a.useCallback)(function(){var a=Object(A.a)(I.a.mark(function a(c){var o,s,i,u,l,f,d,m,b,p,h,v,g,E,O,j,S,y,C,q,x,N,M,T,P,L,R;return I.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(o=e.state,s=o.instruments,i=o.tracks,u=o.effects,l=o.presets,f=o.selector,d=o.sequencer,m=t(c),b=m.x,p=m.y,h=e.state.spatial.editorPadding,b-=Math.max(0,h.x),p-=Math.max(0,h.y),!s.pullablePartDragging){a.next=13;break}return(v=Object(ae.a)({},s.pullablePartDragging)).x=b,v.y=p,g=[].concat(Object(w.a)(u.pulledEffects),[v]),n(Object(k.Ae)(g)),r(),a.abrupt("return");case 13:if(!i.trackDragging){a.next=18;break}return(E=i.trackDragging).subSequence.createZTrack(E,b,p),r(),a.abrupt("return");case 18:if(void 0===f.sampleDragging){a.next=44;break}O=oe(e.currentSubSequence.pads),a.prev=20,O.s();case 22:if((j=O.n()).done){a.next=31;break}if(S=j.value,!(y=S.containsSample(f.sampleDragging))){a.next=29;break}return S.removeTrack(y),r(),a.abrupt("return");case 29:a.next=22;break;case 31:a.next=36;break;case 33:a.prev=33,a.t0=a.catch(20),O.e(a.t0);case 36:return a.prev=36,O.f(),a.finish(36);case 39:C=f.sampleDragging,e.addSound(C,void 0),r(),a.next=74;break;case 44:if(!f.samplesDragging){a.next=73;break}q=0,x=oe(f.samplesDragging),a.prev=47,x.s();case 49:if((N=x.n()).done){a.next=62;break}if(M=N.value,!(q>4)){a.next=53;break}return a.abrupt("break",62);case 53:if(T=M,"string"!==typeof M){a.next=58;break}return T=new ce.a(M),a.next=58,T.load();case 58:e.addSound(T),q++;case 60:a.next=49;break;case 62:a.next=67;break;case 64:a.prev=64,a.t1=a.catch(47),x.e(a.t1);case 67:return a.prev=67,x.f(),a.finish(67);case 70:r(),a.next=74;break;case 73:f.sampleTagDragging&&(e.searchForSounds([f.sampleTagDragging]),r());case 74:l.presetDragging&&(e.loadPreset(l.presetDragging,!0),r()),(P=d.effectDragging||u.midiEffectDragging)&&Object.keys(P).length>1&&((L=P.effect).x=b,L.y=p,R=[].concat(Object(w.a)(u.pulledEffects),[L]),n(Object(k.Ae)(R)),r());case 77:case"end":return a.stop()}},a,null,[[20,33,36,39],[47,64,67,70]])}));return function(e){return a.apply(this,arguments)}}(),[e])}},ue=Object(d.b)(function(e,t){return{}},function(e){return{setQuickAddSearchText:function(t){return e(Object(k.Ce)(t))},setShowSearchWindow:function(t){return e(Object(k.hg)(t))}}})(function(e){var t=e.showing,n=e.setShowSearchWindow,o=e.sequencerEngine,s=e.setQuickAddSearchText,i=Object(a.useRef)(void 0),u=Object(a.useRef)(0),l=Object(a.useRef)(void 0),f=Object(a.useState)(void 0),d=Object(r.a)(f,2),m=d[0],b=d[1],p=Object(a.useState)(""),h=Object(r.a)(p,2),v=h[0],g=h[1],E=Object(a.useState)(""),O=Object(r.a)(E,2),j=O[0],w=O[1],S=ie(o,function(){return{x:0,y:0}}).onDrop;Object(a.useEffect)(function(){return function(){return s(void 0)}},[]),Object(a.useEffect)(function(){u.current++;var e=u.current;setTimeout(function(){e===u.current&&w(v)},100)},[v,w]);var k=Object(re.a)({ref:i}),y=(k.setCoords,k.onMouseUp,k.onMouseDown,k.coords);Object(a.useEffect)(function(){t&&l.current&&l.current.focus()},[t]),Object(a.useEffect)(function(){return window.addEventListener("keydown",C),function(){return window.removeEventListener("keydowwn",C)}},[]);var C=function(e){"ArrowDown"===e.key||e.key},N={left:y&&y.x,top:y&&y.y},M="search-background";t||(M+=" hide"),Object(a.useEffect)(function(){return window.addEventListener("click",T),function(){return window.removeEventListener("click",T)}},[]);var T=function(){n(!1)};return c.a.createElement("div",{onDrop:S,className:M},c.a.createElement("div",{style:N,onClick:function(e){return e.stopPropagation()},ref:i,className:"search-window"},c.a.createElement("div",{onClick:T,className:"delete-btn"},"x"),c.a.createElement("img",{src:"/search.svg",className:"search-icon"}),c.a.createElement("input",{ref:l,className:"search-text",value:v,onChange:function(e){return g(e.target.value)},placeholder:"Search for objects & actions"}),"RECENT_SAMPLES"===m||"ALL_SAMPLES"===m?c.a.createElement(P,{mode:m,searchTerm:v,sequencerEngine:o}):c.a.createElement(ne,{hide:function(){return n(!1)},searchTerm:j,inputRef:l,sequencerEngine:o}),void 0===m&&""===v&&c.a.createElement(x,{setMode:b,sequencerEngine:o}),""===v&&c.a.createElement(q,{clear:T})))}),le=n(1478),fe=n(374);n(2650);function de(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return me(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw c}}}}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var be=function(e){var t,n=[],r=de(e);try{for(r.s();!(t=r.n()).done;){var a=t.value,c=a.effect.getOutboundNodes(),o=!1;for(var s in c){var i=c[s][0];if(i&&i.node&&i.node.zObject&&"three.canvas"===i.node.zObject.name){n.push(i.node.zObject),o=!0,i.node.zObject.pluginViewerFor=a;break}}o||n.push(a)}}catch(u){r.e(u)}finally{r.f()}return n},pe=Object(d.b)(function(e,t){var n=e.spatial.showEditorBottom;return{bottomHeight:n===R.b?e.arrangement.bottomHeight:n===R.a?280:40,leftSidebarWidth:e.spatial.leftSidebarWidth,pluginsLoaded:e.plugins.pluginsLoaded,showPluginsPane:e.plugins.showPluginsPane}},function(e){return{setShowPluginsPane:function(t){return e(Object(k.dg)(t))},setPluginsPaneHeight:function(t){return e(Object(k.se)(t))},setSelectedPulledElements:function(t){return e(Object(k.rf)(t))}}})(function(e){var t=e.setSelectedPulledElements,n=e.pluginsLoaded,r=e.leftSidebarWidth,o=e.setShowPluginsPane,s=e.showPluginsPane,i=e.bottomHeight,u=e.setPluginsPaneHeight,l={bottom:i,left:r,width:window.innerWidth-r-240};n&&(n=be(n));var f=n?Math.max.apply(Math,Object(w.a)(n.map(function(e){return e.height||100}))):void 0;return f=Math.min(300,f)+30,l.minHeight=f,s||(l.height=40,l.minHeight=40),Object(a.useEffect)(function(){u(f)},[f]),n&&0!==n.length?c.a.createElement("div",{onMouseDown:function(){return t({})},style:l,className:s?"plugins-pane showing":"plugins-pane"},c.a.createElement("div",{className:"collapse-and-label"},c.a.createElement("div",{onClick:function(){return o(!s)},className:"collapse-container"},c.a.createElement("div",{className:s?"arrow-right":"arrow-up"})),c.a.createElement("div",{className:"plugins-label"},c.a.createElement("img",{src:"/plugin-icon.svg"}))),s&&c.a.createElement("div",{className:"plugins-container"},n.map(function(e){return c.a.createElement(fe.a,{forceShow:!0,zobject:e})}))):[]}),he=n(2622),ve=n(1127),ge=n(2694),Ee=n(185),Oe=n(2560),je=n(1145),we=n(1137),Se=n(1143),ke=n(102),ye=n(227),Ce=n(136),qe=n(473),xe=Object(d.b)(function(e,t){return{presentationMode:e.spatial.presentationMode,pulledEffects:e.effects.pulledEffects}},function(e){return{setPulledEffects:function(t){return e(Object(k.Ae)(t))}}})(function(e){var t=e.dropdownPosRef,n=e.subSequence,r=e.scale,o=e.dropdownPos,s=e.pulledEffects,i=e.setPulledEffects,u=e.elements,l=Object(Oe.a)({elements:u,subSequence:n,presentationMode:n.presentationMode}).arrangeWindows,f=Object(a.useCallback)(function(){var e=t.current,r=e.x,a=e.y;n.encapsulateObjects(r,a)},[n]),d=Object(a.useCallback)(function(){for(var e=n.sequencerEngine.state.windows.selectedElements,t=0,r=Object.keys(e);t<r.length;t++){var a=r[t],c=n.sequencerEngine.findNodeById(a);c&&c.setAttribute("Include in Presentation",!0)}},[n]),m=Object(a.useCallback)(function(e){var r=Object(ke.c)(e,n),a=t.current,c=a.x,o=a.y;r.x=c,r.y=o,n.midiEffects.addEffect(r),i([].concat(Object(w.a)(s),[r]))},[n,s]),b=n.state.windows.selectedElements,p=Object.keys(b).filter(function(e){return b[e]});return c.a.createElement(ye.a,{className:"midi-context",dropdownPos:o?{x:o.x/r,y:o.y/r}:void 0},p.length>0&&c.a.createElement(Ce.a,{onMouseDown:f},"Encapsulate Objects"),p.length>0&&c.a.createElement(Ce.a,{onMouseDown:d},"Include in Presentation",c.a.createElement("img",{src:"/presentation-mode.svg"})),p.length>0&&c.a.createElement(Ce.a,{onMouseDown:l},"Pack Objects"),c.a.createElement(Ce.a,{onMouseDown:function(){return Object(Se.a)(n.sequencerEngine,n)}},"Segment All Cables"),c.a.createElement("div",{className:"context-divider"}),c.a.createElement(qe.a,{name:"Midi Effects"},ke.e.map(function(e){var t=e.label,n=e.value;return c.a.createElement(Ce.a,{onMouseDown:function(){return m(n)}},t)})))}),Ne=n(259),Me=n(1138),Te=n(229),Pe=n(2592),Le=n(713),Re=(Object(d.b)(function(e,t){return t.sequencerEngine?{selectedTrack:t.sequencerEngine.getSelectedTrack()}:{}},function(e){return{}})(function(e){var t=e.selectedTrack;return t?(console.log("track =",t),c.a.createElement("div",{className:"cirklon-element"},c.a.createElement(Le.a,{track:t}))):""}),n(1475)),De=n(1172),Ie=n(2563),Ae=(n(2651),Object(d.b)(function(e,t){return{numPads:t.sequencerEngine.currentSubSequence&&t.sequencerEngine.currentSubSequence.pads.length}},function(e){return{setShowPadSequencer:function(t){return e(Object(k.Zf)(t))}}})(function(e){var t=e.pad,n=e.sequencerEngine,o=e.setShowPadSequencer,s=Object(a.useState)(void 0),i=Object(r.a)(s,2),u=i[0],l=i[1],f=Object(a.useState)(""),d=Object(r.a)(f,2),m=d[0],b=d[1],p=Object(a.useRef)(),h=Object(a.useCallback)(function(e){b(e.target.value)},[b]),v=Object(a.useCallback)(function(e){"Enter"===e.key&&(u.name=m,l(void 0))},[u,l,m]),g=Object(a.useCallback)(function(){b(p.current.name),l(p.current)},[b,l]),E=Object(Ee.a)(g,250),O=n.currentSubSequence.pads,j=Object(a.useCallback)(function(e){var t=n.state.tracks.trackDragging;if(console.log("on drop called with pad/trackDragging",e,t),t){for(var r=-1,a=0;a<e.slots.length;a++)if(!e.slots[a]){r=a;break}console.log("slot number=",r),r>-1&&e.addTrack(t,r)}},[]);return c.a.createElement("div",{className:"pad-tabs"},O.map(function(e,n){return c.a.createElement("div",{onDrop:function(){return j(e)},onClick:function(t){p.current=e,o(e),E(t)},className:function(){var n=t===e?"pad-option selected":"pad-option";return e===u&&(n+=" editing"),n}()},u===e?c.a.createElement("input",{onChange:h,placeholder:"Enter name",onKeyDown:v,type:"text",value:m,className:"pad-name-input"}):e.name||"Pad "+(n+1))}),c.a.createElement("div",{onClick:function(){var e=n.currentSubSequence.createPad();o(e)},className:"pushable new-pad-btn"},"+"))})),ze=n(1121),Fe=n(1477),Be=(n(2652),Object(d.b)(function(e,t){return{tracks:t.pad.tracks,showEditorBottom:e.spatial.showEditorBottom,bottomHeight:e.arrangement.bottomHeight,editorBottomHeight:t.editorBottomRef.current&&t.editorBottomRef.current.offsetHeight,pluginsPaneHeight:e.plugins.pluginsPaneHeight||0,leftSidebarWidth:e.spatial.leftSidebarWidth}},function(e){return{setShowPadSequencer:function(t){return e(Object(k.Zf)(t))},setSelectedZObject:function(t){return e(Object(k.zf)(t))},setShowFreezeModal:function(t){return e(Object(k.Rf)(t))}}})(function(e){var t=e.leftSidebarWidth,n=e.pad,o=e.showEditorBottom,s=e.bottomHeight,i=e.setShowPadSequencer,u=e.setSelectedZObject,l=e.pluginsPaneHeight,f=e.editorBottomRef,d=e.editorBottomHeight,m=e.setShowFreezeModal,b=Object(a.useRef)(void 0),p=Object(a.useState)(0),h=Object(r.a)(p,2),v=(h[0],h[1]),g={},E=Object(a.useCallback)(function(){m(!0)},[n]);o===R.b?g.marginBottom=s:o===R.a?(console.log("editor bottom height",d,f),g.marginBottom=d||400):g.marginBottom=40,g.marginBottom+=l+20;var O=n.slotTracks;return O.sort(function(e,t){return e.trackNumber-t.trackNumber}),c.a.createElement("div",{style:g,onClick:function(){return u(void 0)},className:"pad-sequencer",ref:b},c.a.createElement(Ie.a,{setHeight:v,sequencerEngine:n.sequencerEngine}),c.a.createElement(Re.a,{fillSize:!0,sequencerEngine:n.sequencerEngine,scale:1,scrollContainer:b}),c.a.createElement("div",{style:{left:t},className:"pad-sequencer-toolbar"},c.a.createElement("div",{className:"inner-toolbar"},c.a.createElement("div",{onClick:function(){return i(void 0)},className:"arrow-container pad-sequencer-back"},c.a.createElement("div",{className:"arrow-left"})),c.a.createElement(Ae,{pad:n,sequencerEngine:n.sequencerEngine}),c.a.createElement("div",{onClick:E,className:"pushable freeze-pad flex"},c.a.createElement("img",{className:"mt-1",src:"/freeze-icon.svg"})," Freeze"))),O.map(function(e){return c.a.createElement(Fe.a,{forceShow:!0,track:e,scrollContainer:b})}))})),Ge=n(2702),He=(n(2645),Object(d.b)(function(e,t){return{leftSidebarWidth:e.spatial.leftSidebarWidth,showThemeGrid:e.sequencer.showThemeGrid,showPadSequencer:e.spatial.showPadSequencer,position:e.spatial.position,loadingSequence:e.sequencer.loadingSequence,currentSubSequence:t.sequencerEngine&&t.sequencerEngine.currentSubSequence}},function(e){return{setShowTrackInstrument:function(t){return e(Object(k.pg)(t))},setPulledEffects:function(t){return e(Object(k.Ae)(t))},setSelectedPulledElements:function(t){return e(Object(k.rf)(t))},setSelectedZObject:function(t){return e(Object(k.zf)(t))},hideColorPicker:function(t){return e(Object(k.pb)(void 0))}}})(function(e){var t=e.sequencerEngine,n=e.editorBottomRef,o=e.leftSidebarWidth,s=(e.setShowTrackInstrument,e.showPadSequencer),i=e.currentSubSequence,u=(e.setPulledEffects,e.setSelectedZObject),l=e.hideColorPicker,f=(e.setSelectedPulledElements,e.showThemeGrid),d=Object(a.useRef)(),m=Object(a.useRef)(void 0),b=Object(a.useRef)(void 0),p=Object(a.useState)(1),h=Object(r.a)(p,2),v=h[0],g=h[1],E=Object(Te.a)({containerRef:d,scale:v}).getXY,O=Object(Ne.a)({ref:d}),j=O.onContextMenu,w=O.dropdownPos,S=(O.setDropdowPos,Object(a.useRef)(w)),y=Object(a.useRef)({}),C=Object(Me.a)({elements:y}).getSelection,q=i,x=Object(a.useCallback)(function(e){var n=E(e,!0),r=n.x,a=n.y,c=t.state.spatial.editorPadding;r-=Math.max(0,c.x),a-=Math.max(0,c.y),e.stopPropagation(),e.preventDefault(),q.createZObject(r,a)},[q]),N=Object(Ee.a)(x);Object(a.useEffect)(function(){w&&(S.current=w)},[w]);var M=Object(De.a)({scrollRef:d,sequencerEngine:t,context:t&&t.currentSubSequence}).onMouseMove;Object(a.useEffect)(function(){t&&t.dispatch(Object(k.gd)(d))},[t]);var T=ie(t,E).onDrop;if(!t)return 0;var P={paddingLeft:o},L="editor no-select";return f&&(L+=" show-grid"),c.a.createElement("div",{onContextMenu:j,style:P,onMouseDown:function(){return l()},onClick:N,onDrop:T,ref:d,className:L},!s&&c.a.createElement(xe,{elements:y,subSequence:q,scale:v,dropdownPosRef:S,dropdownPos:w}),!s&&c.a.createElement(we.a,{dropdownPos:w,getXY:E,scale:v,sequencerEngine:t,setSelectedZObject:u,onMouseMove:M,getSelection:C,editorRef:d}),s?c.a.createElement(Be,{editorBottomRef:n,pad:!0===s?q.pads[0]:s}):c.a.createElement(Ge.a,{editorRef:d,edgesRef:m,innerRef:b,setScale:g,elements:y,dropdownPosRef:S,key:q.id,scale:1,showEffects:!0,subSequence:q,sequencerEngine:t},c.a.createElement(je.a,{edgesRef:m,containerRef:d,scale:v,subSequence:q}),c.a.createElement(Re.a,{sequencerEngine:t,scrollContainer:d}),c.a.createElement(Pe.a,{scrollContainer:d,sequencerEngine:t})),s&&c.a.createElement(Pe.a,{scrollContainer:d,sequencerEngine:t}))})),Ue=n(81),We=n(1135),Ze=Object(d.b)(function(e,t){return{viewMode:e.sequencer.viewMode}},function(e){return{setViewMode:function(t){return e(Object(k.Jh)(t))},setContextualHelp:function(t,n){return e(Object(k.wb)(t,n))}}})(function(e){return c.a.createElement("div",{className:"view-buttons"},c.a.createElement("img",{onClick:function(){return e.setViewMode(h.d)},src:"/mix-view.svg",className:e.viewMode===h.d?"view-mode-icon selected":"view-mode-icon"}),c.a.createElement("img",{src:"/arrangement-view.svg",onClick:function(){return e.setViewMode(h.a)},className:e.viewMode===h.a?"view-mode-icon selected":"view-mode-icon"}),c.a.createElement("img",{src:"/arrangement-view.svg",onClick:function(){return e.setViewMode(h.b)},className:e.viewMode===h.b?"view-mode-icon selected":"view-mode-icon"}))}),_e=n(2564),Ve=n(2540),Xe=n(2600),Ye=n(76),Je=Object(d.b)(function(e,t){return{}},function(e){return{setShowProjectsModal:function(t){return e(Object(k.fg)(t))},setShowSearchWindow:function(t){return e(Object(k.hg)(t))},setShowSettings:function(t){return e(Object(k.kg)(t))}}})(function(e){var t=Object(a.useState)(!1),n=Object(r.a)(t,2),o=n[0],s=n[1];return c.a.createElement(Ye.c,{className:"logo-dropdown view-dropdown guilds-dropdown",show:o?"true":"false",isOpen:o,toggle:function(){return s(!o)}},c.a.createElement(Ye.f,{size:"sm",caret:!0,color:"primary"},c.a.createElement("img",{src:"/smol-logo4.svg"})),c.a.createElement(Ye.e,null,c.a.createElement(Ye.d,{onClick:function(){return e.setShowSearchWindow(!0)}},"Search ",c.a.createElement("div",{className:"key-shortcut"},"/")),c.a.createElement(Ye.d,{onClick:function(){return e.setShowSettings(!0)}},"Settings"),c.a.createElement(Ye.d,{onClick:function(){return e.setShowProjectsModal(!0)}},"Open Project"),c.a.createElement(Ye.d,{onClick:function(){window.location.href="/v3"}},"New Project")))}),Ke=n(2565),Qe=n(1158),$e=n(1129),et=n(1119),tt=n(2591),nt=n(2599),rt=(n(2653),Object(d.b)(function(e,t){return{showLFOs:e.sequencer.showLFOs,showEnvelopes:e.sequencer.showEnvelopes,show:e.spatial.sidebarsShowing,showMoulators:e.spatial.showModulators,viewMode:e.sequencer.viewMode,showSave:e.toolbar.showSaveModal}},function(e){return{setShowEnvelopes:function(t){return e(Object(k.Of)(t))},setShowLFOs:function(t){return e(Object(k.Uf)(t))},setShowSave:function(t){return e(Object(k.gg)(t))}}})(function(e){var t=e.showSave,n=e.setShowSave,r=Object(Ue.a)(e,["showSave","setShowSave"]),o=Object(a.useRef)(),s=Object(a.useCallback)(function(e,t,a){r.sequencerEngine.save(e,t,!0,a),n(!1)},[n,r.sequencerEngine]);Object(a.useEffect)(function(){return window.addEventListener("keydown",i),function(){return window.removeEventListener("keydown",i)}},[r.showLFOs,r.showEnvelopes]);var i=Object(a.useCallback)(function(e){},[r.showLFOs,r.showEnvelopes]);return c.a.createElement("div",{ref:o,className:"top-toolbar"},c.a.createElement("div",{className:"main-row toolbar-row"},c.a.createElement(Je,r),r.sequencerEngine?r.viewMode===h.a?c.a.createElement(ze.a,{sequencerEngine:r.sequencerEngine}):c.a.createElement(nt.a,{subSequence:r.sequencerEngine.currentSubSequence}):"",r.sequencerEngine&&c.a.createElement(Qe.a,{sequencerEngine:r.sequencerEngine}),r.sequencerEngine&&c.a.createElement(Ke.a,{sequencerEngine:r.sequencerEngine}),r.sequencerEngine&&c.a.createElement($e.a,{sequencerEngine:r.sequencerEngine}),r.sequencerEngine&&c.a.createElement(Xe.a,{sequencerEngine:r.sequencerEngine}),r.sequencerEngine&&c.a.createElement(Ze,{sequencerEngine:r.sequencerEngine}),c.a.createElement("div",{className:"menu-and-transactions"},c.a.createElement(Ve.a,null),r.sequencerEngine&&c.a.createElement(et.a,{store:r.sequencerEngine.store})),c.a.createElement("div",{onClick:function(){return n(!0)},className:"pushable save-project-button"},"Save"),c.a.createElement(We.a,{sequencerEngine:r.sequencerEngine}),c.a.createElement(tt.a,{sequencerEngine:r.sequencerEngine,onSave:function(e,t,n){return s(e,t,n)},onHide:function(){return n(!1)},show:t})),(r.showLFOs||r.showEnvelopes)&&c.a.createElement("div",{className:r.showLFOs?"overlaying toolbar-row showLFOs":"showEnvelopes overlaying toolbar-row"},c.a.createElement(_e.a,{scrollContainer:o,sequencerEngine:r.sequencerEngine,envelopesTrack:r.sequencerEngine.envelopesTrack,lfosTrack:r.sequencerEngine.lfosTrack})))})),at=n(1120),ct=n(1126),ot=(n(2601),n(42)),st=n.n(ot),it=Object(d.b)(function(e,t){return{currentSubSequence:t.sequencerEngine.currentSubSequence}},function(e){return{}})(function(e){var t=e.sequencerEngine,n=e.currentSubSequence,r=e.style,a=t.subSequences.map(function(e,t){return{label:e.name,value:e.id}});return c.a.createElement("div",{style:r,className:"subsequence-navigator"},c.a.createElement(st.a,{onChange:function(e){return t.switchToSubSequence(e.value)},value:a.find(function(e){return e.value===n.id}),options:a}),c.a.createElement("div",{onClick:function(){return t.newSubSequence()},className:"new-sub-btn"},"+"),c.a.createElement("div",{onClick:function(){return t.deleteSubSequence()},className:"delete-sub-btn"},"-"))}),ut=(n(2538),n(2574)),lt=Object(d.b)(function(e,t){var n=t.pad.id;return{_tracks:t.pad.tracks,_tracksLength:t.pad.tracks.length,hidden:e.spatial.hiddenObjects[n],locked:e.spatial.lockedObjects[n]}},function(e){return{setShowPadSequencer:function(t){return e(Object(k.Zf)(t))},setUXLockObject:function(t,n){return e(Object(k.Ah)(t,n))},setUXHideObject:function(t,n){return e(Object(k.zh)(t,n))}}})(function(e){var t=e.setShowPadSequencer,n=e.pad,o=e.isSelected,s=e.number,i=e.leftSidebarWidth,u=e.selectedZObject,l=(e.setSelectedZObject,e.hidden,e.locked,e.setUXLockObject,e.setUXHideObject,Object(a.useState)(!0)),f=Object(r.a)(l,2),d=f[0],m=f[1],b="pad-container";o&&(b+=" selected"),b+=d?" opened":" closed";var p=Object(a.useCallback)(function(e){e.stopPropagation(),m(!d)},[m,d]);return c.a.createElement("div",{className:b},c.a.createElement("div",{onClick:function(){t(n)},className:n===u?"selected zpad":"zpad"},c.a.createElement("div",{style:{backgroundColor:n.color},className:"pad-icon object-icon"}),c.a.createElement("div",{className:"pad-name"},i>100&&(n.name||"Pad "+s)),d?c.a.createElement("div",{onClick:p,className:"pushable arrow-down"}):c.a.createElement("div",{onClick:p,className:"pushable arrow-up"})),d&&c.a.createElement("div",{className:"pad-tracks"},n.tracks.filter(function(e){return e}).map(function(e){return c.a.createElement(ut.a,{selectedZObject:u,track:e})})))}),ft=(n(260),n(2640),n(2706),Object(d.b)(function(e,t){var n=t.sequencerEngine&&t.sequencerEngine.currentSubSequence;return n?{pads:n.pads,selectedZObject:e.zobject.selectedZObject,showPadSequencer:e.spatial.showPadSequencer,show:e.spatial.sidebarsShowing,tracks:t.sequencerEngine.tracks&&t.sequencerEngine.tracks.length,leftSidebarWidth:e.spatial.leftSidebarWidth}:{}},function(e){return{setSelectedZObject:function(t){return e(Object(k.zf)(t))},setViewableSubPatches:function(t){return e(Object(k.Kh)(t))},setWindowPosition:function(t,n){return e(Object(k.Qh)(t,n))},setViewableZObjects:function(t){return e(Object(k.Lh)(t))},setLeftSidebarWidth:function(t){return e(Object(k.ad)(t))}}})(function(e){var t=e.setWindowPosition,n=e.show,o=e.setSelectedZObject,s=e.setViewableSubPatches,i=e.setViewableZObjects,u=e.leftSidebarWidth,l=e.setLeftSidebarWidth,f=e.sequencerEngine,d=e.selectedZObject,m=e.pads,b=e.showPadSequencer,p=Object(a.useState)(!1),h=Object(r.a)(p,2),v=h[0],g=h[1],E=Object(a.useState)(""),O=Object(r.a)(E,2),j=O[0],S=(O[1],Object(a.useState)("Tracks")),k=Object(r.a)(S,2),y=(k[0],k[1]);Object(a.useEffect)(function(){return window.addEventListener("mousemove",C),window.addEventListener("mouseup",q),function(){window.removeEventListener("mousemove",C),window.removeEventListener("mouseup",q)}},[v,g]);var C=Object(a.useCallback)(function(e){v&&l(Math.max(50,Math.min(240,e.pageX)))},[v]),q=Object(a.useCallback)(function(){v&&g(!1)},[v,g]);Object(a.useEffect)(function(){d&&d.getObjectType()===G.c?y("Tracks"):y("Objects")},[y,d]);var x=Object(a.useCallback)(function(e){var n=void 0;if(e.effect&&e.effect.zObjects)n=e.effect.id,s([e.effect]);else if(e.subSequence.zObjects&&e.subSequence.inletObjects){var r=e.state.zobject.viewableZObjects;t(e.window.id,{x:100,y:100}),i([].concat(Object(w.a)(r),[e]))}n&&t(n,0,0),o(e)},[]);Object(Ee.a)(x,250,function(e){return o(e)});if(!n)return"";var N=c.a.createElement("div",{className:"object-explorer"},f&&""===j&&m.map(function(e,t){return c.a.createElement(lt,{isSelected:b===e,leftSidebarWidth:u,number:t+1,selectedZObject:d,pad:e})}));return c.a.createElement("div",{style:{width:u,minWidth:u},className:"sidebar left-sidebar"},c.a.createElement(it,{style:u<140?{display:"none"}:{},sequencerEngine:f}),c.a.createElement(ze.a,{sequencerEngine:f}),N,c.a.createElement("div",{onMouseDown:function(){return g(!0)},className:"right-edge"}))})),dt=n(14),mt=n.n(dt),bt=n(343),pt=(n(55),n(33)),ht=function(){var e=Object(A.a)(I.a.mark(function e(t,n){var r;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.map(function(e){return e.uploadAudioBuffer(n)}),t.forEach(function(e){return e.title=e.name}),e.next=4,Promise.all(r);case 4:e.sent,0===n&&pt.a.newSamplesWithMetadata(t,n);case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),vt=(n(2654),Object(d.b)(function(e,t){return{userToken:e.sequencer.userToken,samplesToSave:e.samples.samplesToSave,guildId:e.guilds.selectedGuild?e.guilds.selectedGuild.guildId:0}},function(e){return{setShowLogin:function(t){return e(Object(k.Vf)(t))},setUploadingFile:function(t){return e(Object(k.Dh)(t))},setSamplesToSave:function(t){return e(Object(k.Te)(t))},setRecentlyAddedSounds:function(t){return e(Object(k.Ee)(t))}}})(function(e){var t=e.setShowLogin,n=e.userToken,o=e.setRecentlyAddedSounds,s=e.setSamplesToSave,i=e.sequencerEngine,u=e.setUploadingFile,l=e.samplesToSave,f=e.guildId,d=Object(a.useState)(!1),m=Object(r.a)(d,2),b=m[0],p=m[1],h=Object(a.useRef)(void 0),v=Object(a.useState)([]),g=Object(r.a)(v,2),E=g[0],O=g[1],j=Object(a.useState)([]),k=Object(r.a)(j,2),y=(k[0],k[1],Object(a.useState)("")),C=Object(r.a)(y,2),q=C[0],x=C[1],N=Object(a.useRef)(new bt.a(mt.a.Master.context)),M=Object(a.useState)(void 0),T=Object(r.a)(M,2),P=T[0],L=T[1],R=Object(a.useCallback)(function(e,t){e||(e=l[t]),e&&(N.current.setBuffer(e.audioBuffer),N.current.playSound(0),L(t))},[L,l]);Object(a.useEffect)(function(){return window.addEventListener("keydown",D),function(){return window.removeEventListener("keydown",D)}},[l,L,P,O,E,q]);var D=Object(a.useCallback)(function(e){"Enter"===e.key?I():"ArrowUp"===e.key?R(void 0,Object(S.a)(P-1,l.length)):"ArrowDown"===e.key&&R(void 0,Object(S.a)(P+1,l.length))},[l,L,P,O,E,q]),I=Object(a.useCallback)(function(){O([].concat(Object(w.a)(E),[q])),x("")},[q,E,O,x]);Object(a.useEffect)(function(){l.forEach(function(e){return e.tags=Array.from(new Set([].concat(Object(w.a)(e.tags),Object(w.a)(E))))})},[E,l]);var A=Object(a.useCallback)(function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||0!==f){u(!0);var e=l;ht(l,f).then(function(t){console.log("finished bulk uploading..."),o(e),u(!1)}),s([])}else p(!0)},[f,p,l]),z=Object(re.a)({ref:h,initialCoords:{x:500,y:300}}),F=(z.setCoords,z.onMouseUp),B=z.onMouseDown,G=z.coords;return l&&0!==l.length?c.a.createElement("div",{ref:h,className:"samples-to-save",onMouseUp:F,onMouseDown:B,style:G?{top:G.y,left:G.x}:{}},b&&c.a.createElement("div",{className:"confirmation"},c.a.createElement("div",{className:"confirmation-text"},"Are you sure you want to save this samples publicly? Anyone will be able to see them."),c.a.createElement("div",{className:"buttons"},c.a.createElement("div",{onClick:function(){return A(!0)},className:"save-btn pushable"},"Yes"),c.a.createElement("div",{onClick:function(){return p(!1)},className:"save-btn pushable cancel"},"Cancel"))),c.a.createElement("div",{className:"samples-list"},l.map(function(e,t){return c.a.createElement("div",{onClick:function(){return R(e,t)},className:t===P?"sample-to-save selected":"sample-to-save"},c.a.createElement("div",{className:"sts-name"},e.name),e.tags&&e.tags.map(function(e){return c.a.createElement("div",{className:"sts-tag"},e)}))})),c.a.createElement("div",{className:"tags-editor"},c.a.createElement("div",{className:"tags-container"},E.map(function(e){return c.a.createElement("div",{className:"tag-option"},e)})),c.a.createElement("div",{className:"tag-input-container"},c.a.createElement("input",{placeholder:"Enter tags for these sounds",value:q,onChange:function(e){return x(e.target.value)},className:"tag-input"}),c.a.createElement("div",{onClick:I,className:"add-btn pushable"},"+"))),n?c.a.createElement("div",{className:"buttons"},c.a.createElement(et.a,{store:i.store}),c.a.createElement("div",{onClick:function(){return A(!1)},className:"save-btn pushable"},"Save ",0===f?"Publicly":" to Guild")):c.a.createElement("div",{className:"buttons"},c.a.createElement("span",{onClick:function(){return t(!0)},className:"pushable show-login-btn"},"Login")," to save these sounds.")):""})),gt=n(2647);n(2655),n(1497),n(1498),n(1499),n(1123),n(2646),n(1479),n(1480),n(1481),n(961),n(1482),n(1483),n(1484),n(1485),n(1507),n(1500),n(1130),n(1486),n(1487),n(1142),n(1501),n(1136),n(1476),n(1488),n(1489),n(1128),n(1502),t.default=Object(d.b)(function(e,t){return{theme:e.sequencer.wallpaper?"dark":e.sequencer.theme,backgroundColor:e.sequencer.backgroundColor,presentationMode:!1,showPianoRoll:e.sequencer.showPianoRoll,showSearchWindow:e.spatial.showSearchWindow,viewMode:e.sequencer.viewMode,creatingNewPack:e.packs.creatingNewPack,packToEdit:e.packs.packToEdit,fullScreenZObject:e.zobject.fullScreenZObject,wallpaper:e.sequencer.wallpaper,showPadSequencer:e.spatial.showPadSequencer}},function(e){return{setFullScreenZObject:function(t){return e(Object(k.tc)(t))},setSelectedZObject:function(t){return e(Object(k.zf)(t))},setWallpaper:function(t){return e(Object(k.Mh)(t))},setTheme:function(t){return e(Object(k.Pg)(t))},setShowThemeGrid:function(t){return e(Object(k.mg)(t))},setArrangementBottomHeight:function(t){return e(Object(k.D)(t))},setBackgroundColor:function(t){return e(Object(k.cb)(t))}}})(function(e){var t=Object(a.useRef)(void 0),n=Object(a.useRef)(void 0),l=e.sequencerEngine?[void 0,d,void 0]:Object(at.a)(e),f=Object(r.a)(l,3),d=(f[0],f[1]);f[2];e.sequencerEngine&&(d=e.sequencerEngine);var w=Object(ct.a)({sequencerEngine:d});Object(r.a)(w,1)[0];if(Object(O.a)({theme:e.theme,backgroundColor:e.backgroundColor}),Object(a.useEffect)(function(){if(window.isNFT)return!1;var t=o.a.getItem("wallpaper");t&&e.setWallpaper(t),(t=o.a.getItem("theme"))&&e.setTheme(t),(t=o.a.getItem("show-theme-grid"))&&e.setShowThemeGrid(JSON.parse(t)),(t=o.a.getItem("backgroundColor"))&&e.setBackgroundColor(t)},[]),e.fullScreenZObject)return c.a.createElement("div",{ref:t,className:"v3 dark no-select full-screen"},c.a.createElement(v.a,{containerRef:t}),e.showSearchWindow&&c.a.createElement(ue,{sequencerEngine:d,showing:e.showSearchWindow}),c.a.createElement("div",{onClick:function(){return e.setSelectedZObject(void 0)},className:"editor full-screen-editor"},!window.isNFT&&c.a.createElement(m,null),c.a.createElement(u.a,{sequencerEngine:d}),c.a.createElement("img",{className:"pushable expand-icon",onClick:function(){return e.setFullScreenZObject(void 0)},src:"/expand-icon.svg"}),Array.isArray(e.fullScreenZObject)?c.a.createElement("div",{className:"multi-full-screen"},e.fullScreenZObject.map(function(e){return c.a.createElement(g.default,{key:e.id,isMulti:!0,sequencerEngine:d,zObject:e})})):c.a.createElement(g.default,{isMulti:!0,sequencerEngine:d,zObject:e.fullScreenZObject})));var S={},k="v3 no-select dark ";return e.wallpaper&&(S.backgroundImage="url("+b.a.getHashUrl(e.wallpaper)+")",k+=" has-wallpaper"),e.showPadSequencer&&(k+=" showing-pad-sequencer"),"light"===e.theme?k+=" light-theme":k+=" dark-theme",e.presentationMode&&(k+=" presentation-mode"),c.a.createElement("div",{style:S,ref:t,className:k},c.a.createElement(ve.a,{sequencerEngine:d}),c.a.createElement(s.a,null),c.a.createElement(gt.a,null),c.a.createElement(rt,{sequencerEngine:d}),c.a.createElement(u.a,{sequencerEngine:d}),c.a.createElement(v.a,{containerRef:t}),c.a.createElement(vt,{sequencerEngine:d}),d&&c.a.createElement(E.a,{sequencerEngine:d}),e.creatingNewPack||e.packToEdit?c.a.createElement(j.a,{json:e.packToEdit}):"",e.showSearchWindow&&c.a.createElement(ue,{sequencerEngine:d,showing:e.showSearchWindow}),e.showPianoRoll?c.a.createElement(he.a,{sequencerEngine:d}):e.viewMode===h.a?c.a.createElement(p.a,{sequencerEngine:d}):e.viewMode===h.d?c.a.createElement(i.a,{sequencerEngine:d}):c.a.createElement("div",{className:"editor-and-sidebars"},c.a.createElement(ft,{sequencerEngine:d}),c.a.createElement(He,{editorBottomRef:n,isDocumentation:e.isDocumentation,sequencerEngine:d}),c.a.createElement(ge.a,{sequencerEngine:d}),d&&c.a.createElement(pe,{scrollRef:t,sequencerEngine:d}),d&&c.a.createElement(le.a,{editorBottomRef:n,scrollRef:t,sequencerEngine:d})))})}}]);