(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{2540:function(e,t,n){"use strict";var r=n(3),a=n(4),c=n(7),o=n(11),s=n(1),i=n(0),u=n.n(i),l=n(13),f=n(225),d=n.n(f);function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var b=function(e){Object(c.a)(n,e);var t=m(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return 0===this.props.numPending?u.a.createElement("div",null):u.a.createElement("div",{className:"pending-transactions"},"Syncing ",this.props.numPending," items",u.a.createElement(d.a,{sizeUnit:"px",size:8,color:"#6200ff",loading:!0}))}}]),n}(i.Component);t.a=Object(l.b)(function(e,t){return{numPending:e.transactions.pendingTransactions.length}},null)(b)},2545:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return c});var r="SEQUENCE_ANNOTATION",a="SEQUENCE_TAG",c="SAMPLE_ANNOTATION"},2560:function(e,t,n){"use strict";var r=n(9),a=n(8),c=n(0),o=n(10),s=n(3),i=n(4),u=function(){function e(t,n){Object(s.a)(this,e),this.root={x:0,y:0,w:t,h:n}}return Object(i.a)(e,[{key:"fit",value:function(e){var t,n,r;for(t=0;t<e.length;t++)r=e[t],(n=this.findNode(this.root,r.w,r.h))&&(r.fit=this.splitNode(n,r.w,r.h))}},{key:"findNode",value:function(e,t,n){return e.used?this.findNode(e.right,t,n)||this.findNode(e.down,t,n):t<=e.w&&n<=e.h?e:null}},{key:"splitNode",value:function(e,t,n){return e.used=!0,e.down={x:e.x,y:e.y+n,w:e.w,h:e.h-n},e.right={x:e.x+t,y:e.y,w:e.w-t,h:n},e}}]),e}();n.d(t,"a",function(){return l});var l=function(e){e.ref;var t=e.elements,n=e.subSequence,s=e.presentationMode;return{arrangeWindows:Object(c.useCallback)(function(){if(t.current){var e=n.sequencerEngine.state.windows.moduleSizes[n.id],c=n.state.windows.selectedElements,i=[];for(var l in c)c[l]&&i.push(l);var f=[],d=[];for(var m in t.current)if(!(i.length>0)||i.includes(m)){var b=t.current[m].current;if(b){var g={element:b,id:m,h:b.offsetHeight+15,w:b.offsetWidth+15};f.push(g),d.push(Object(a.a)({},g,{x:b.offsetLeft,y:b.offsetTop}))}}f.sort(function(e,t){return Math.max(t.w,t.h)-Math.max(e.w,e.h)});var p,v,E=e.width||200,O=e.height||200;if(i.length>0)p=Math.min.apply(Math,Object(r.a)(d.map(function(e){return e.x}))),v=Math.min.apply(Math,Object(r.a)(d.map(function(e){return e.y}))),E=Math.max.apply(Math,Object(r.a)(d.map(function(e){return e.x+e.w})))-p,O=Math.max.apply(Math,Object(r.a)(d.map(function(e){return e.y+e.h})))-v;new u(E,2*O).fit(f);for(var k={},h=0,j=f;h<j.length;h++){var w=j[h];w.fit&&(i.length>0?k[w.id]={x:w.fit.x+p,y:w.fit.y+v}:k[w.id]=Object(a.a)({},w.fit))}console.log("BULK ARRANGING"),s?n.dispatch(Object(o.hb)(k)):n.dispatch(Object(o.ib)(k))}},[t,n,s])}}},2563:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=n(10),o=(n(79),n(716)),s=(n(403),n(2710)),i=(n(300),n(545),n(13));t.a=Object(i.b)(function(e,t){return{pulledEffects:e.effects.pulledEffects,currentSubSequence:t.subSequence||t.sequencerEngine.currentSubSequence}},function(e){return{setPulledEffects:function(t){return e(Object(c.Ae)(t))}}})(function(e){var t=e.setHeight,n=e.containerRef,c=e.sizeRef,i=e.setSize,u=e.size,l=e.all,f=e.pulledEffects,d=e.sequencerEngine,m=e.setPulledEffects,b=e.scale,g=e.currentSubSequence,p=(e.playhead,e.noWrapper),v=e.elements,E=e.ordering,O=e.setOrdering,k=Object(r.useRef)(),h=Object(r.useRef)({}),j=Object(r.useCallback)(function(e){m(f.filter(function(t){return t!==e}))},[f]),w=Object(r.useCallback)(function(e){return!!e&&(Object(o.a)(e)?l||Object(o.a)(e).subSequence===g||Object(o.a)(e)===g:!(!e.instrument||!e.instrument.context||e.instrument.context.subSequence!==g)||e.track===g)},[g,l]);Object(r.useEffect)(function(){if(k.current){var e=k.current.getBoundingClientRect().height;t(e)}},[f,t]);var S=f.filter(w),y=S.map(function(e){return a.a.createElement(s.a,{key:e.id,isStatic:!p,scale:b,elements:v||h,sizeRef:c,setOrdering:O,ordering:E,containerRef:n,size:u,setSize:i,effects:S,onDelete:function(){return j(e)},sequencerEngine:d,fx:e})});return p?y:a.a.createElement("div",{ref:k,className:"pulled-effects"},y)})},2597:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=n(1170),o=n(13);n(2715);t.a=Object(o.b)(function(e,t){return{pads:t.subSequence?t.subSequence.pads:t.sequencerEngine.currentSubSequence.pads}},function(e){return{}})(function(e){var t=e.pads,n=e.scrollContainer;return a.a.createElement("div",{className:"pads-container"},t.map(function(e,t){return a.a.createElement(c.a,{key:t,scrollContainer:n,pad:e})}))})},2599:function(e,t,n){"use strict";var r=n(5),a=n(0),c=n.n(a),o=n(10),s=n(13),i=function(e){var t="ztoolbar-option  ";return e.expanded&&(t+=" selected"),e.hideOnPadSequencer&&(t+=" hide-on-pad-sequencer"),c.a.createElement("div",Object.assign({},e,{className:t}),c.a.createElement("img",Object.assign({},e,{onClick:function(){return 0}})))},u=function(e){e.subSequence;var t=e.type,n=e.drag;return c.a.createElement("div",{className:"modulator-expansion"},c.a.createElement("div",{className:"modulator-type"},"MODULE_ENVELOPE"===t?"Envelopes":"LFOs"),[1,2,3,4].map(function(e){return c.a.createElement("div",{draggable:!0,onDragStart:function(){return n(t+" "+e)},className:"modulator-number"},e)}))};t.a=Object(s.b)(function(e,t){var n=t.subpatch||t.subSequence;return{uxLocked:e.zobject.uxLocked,showLFOs:e.sequencer.showLFOs,showEnvelopes:e.sequencer.showEnvelopes,showPadSequencer:e.spatial.showPadSequencer,presentationMode:n.presentationMode}},function(e){return{setShowEnvelopes:function(t){return e(Object(o.Of)(t))},setShowLFOs:function(t){return e(Object(o.Uf)(t))},setTypeDragging:function(t){return e(Object(o.gi)(t))},setUXLocked:function(t){return e(Object(o.Ch)(t))},setShowModulators:function(t){return e(Object(o.Xf)(t))},setPresentationMode:function(t){return e(Object(o.te)(t))}}})(function(e){e.setPresentationMode;var t=e.presentationMode,n=e.showPadSequencer,o=e.setShowEnvelopes,s=e.showLFOs,l=e.showEnvelopes,f=e.setShowLFOs,d=e.children,m=e.subpatch,b=e.subSequence,g=e.setTypeDragging,p=e.setUXLocked,v=(e.setShowModulators,e.uxLocked),E=Object(a.useState)(void 0),O=Object(r.a)(E,2),k=O[0],h=O[1],j=Object(a.useState)(void 0),w=Object(r.a)(j,2),S=w[0],y=w[1],C=Object(a.useRef)(0);Object(a.useEffect)(function(){return k?window.addEventListener("mouseup",q):window.removeEventListener("mouseup",q),function(){return window.removeEventListener("mouseup",q)}},[k,h]);var q=Object(a.useCallback)(function(){h(void 0)},[k,h]),x=Object(a.useCallback)(function(e){g(e),y(void 0),e.includes("LFO")||e.includes("MODULE_ENVELOPE")||h(void 0),C.current++},[h,y]),M=Object(a.useCallback)(function(e){var t=C.current;setTimeout(function(){t===C.current&&y(e)},250)},[y]),N=Object(a.useCallback)(function(){C.current++,y(void 0)},[]),D=Object(a.useCallback)(function(){p(!v)},[v]),R=Object(a.useCallback)(function(){var e=m||b;console.log("setting presentation mode = ",!e.presentationMode,e),e.presentationMode=!e.presentationMode},[m,b,t]),z="",P=0;if(S)switch(S){case"zobject":z="Drag an object into the canvas",P=0;break;case"zmessage":z="Drag a message box into the canvas",P=1;break;case"zcomment":z="Drag a comment box into the canvas",P=2;break;case"zbutton":z="Drag a button into the canvas",P=3;break;case"ztoggle":z="Drag a toggle into the canvas",P=5;break;case"znumber":z="Drag a number button into the canvas",P=6;break;case"zpad":z="Drag a drum pad into the canvas",P=5;break;case"sequencer":z="Drag a step sequencer into the canvas",P=7;break;case"zlock":z="Toggle the UI to lock in place or be editable",P=8}var T="zobject-toolbar";return n&&(T+=" showing-pad-sequencer"),c.a.createElement("div",{className:T},S&&c.a.createElement("div",{className:"toolbar-tooltip",style:{left:25*P}},z),c.a.createElement(i,{onMouseOver:function(){return M("zobject")},onMouseLeave:N,hideOnPadSequencer:!0,draggable:"true",onDragStart:function(){return x("zobject")},src:"/zobject-light.svg"}),c.a.createElement(i,{onMouseLeave:N,hideOnPadSequencer:!0,onMouseOver:function(){return M("zmessage")},draggable:"true",onDragStart:function(){return x("zmessage")},src:"/zmessage-light.svg"}),c.a.createElement(i,{onMouseLeave:N,hideOnPadSequencer:!0,onMouseOver:function(){return M("zcomment")},draggable:"true",onDragStart:function(){return x("zcomment")},src:"/zcomment-light.svg"}),c.a.createElement(i,{draggable:"true",hideOnPadSequencer:!0,onMouseLeave:N,onMouseOver:function(){return M("zbutton")},onDragStart:function(){return x("zbutton")},src:"/zbutton-light.svg"}),c.a.createElement(i,{draggable:"true",onMouseLeave:N,hideOnPadSequencer:!0,onMouseOver:function(){return M("ztoggle")},onDragStart:function(){return x("ztoggle")},src:"/ztoggle-light.svg"}),c.a.createElement(i,{draggable:"true",onMouseLeave:N,hideOnPadSequencer:!0,onMouseOver:function(){return M("znumber")},onDragStart:function(){return x("znumber")},src:"/znumber-light.svg"}),!m&&c.a.createElement(i,{draggable:"true",onMouseLeave:N,hideOnPadSequencer:!0,onMouseOver:function(){return M("zpad")},onDragStart:function(){return x("zpad")},src:"/zpad-light.svg"}),!m&&c.a.createElement(i,{className:s?"expanded":"",expanded:s,draggable:"false",onClick:function(){return f(!s)},src:"/zlfo-light.svg"}),!m&&c.a.createElement(i,{draggable:"false",expanded:l,className:l?"expanded":"",onClick:function(){return o(!l)},src:"/zenvelope-light.svg"}),k&&c.a.createElement(u,{drag:x,subSequence:b,type:k}),c.a.createElement(i,{onClick:function(){console.log("CLICKED TOGGLE"),R()},expanded:t,onMouseOver:function(){return M("zlock")},hideOnPadSequencer:!0,onMouseLeave:N,className:"presentation-icon",src:"/presentation-mode.svg"}),c.a.createElement(i,{onClick:D,onMouseOver:function(){return M("zlock")},hideOnPadSequencer:!0,onMouseLeave:N,expanded:v,src:v?"/zlock-closed.svg":"/zlock-open.svg"}),m&&d)})},2635:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=n(10),o=n(13);t.a=Object(o.b)(function(e,t){return{drawingEdge:e.pads.drawingEdges[t.pad.subSequence.id]}},function(e){return{setDrawingPadEdge:function(t,n){return e(Object(c.Ob)(t,n))}}})(function(e){var t=e.setDrawingPadEdge,n=e.isSpeaker,c=e.drawingEdge,o=e.fx,s=e.pad,i=e.id,u="effect-input-"+(void 0===i?o.id:i),l=Object(r.useCallback)(function(e){if(c){var r=c.effect,a=c.rack,i=c.outputNumber;(a=a||s.effectRack).connectNodes(r,n?void 0:o,i),t(s.subSequence.id,void 0)}},[c]);return a.a.createElement("div",{onMouseUp:l,id:u,className:"effect-input"})})},2636:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=n(79),o=n(102),s=n(259),i=n(1150),u=n(10),l=n(13);t.a=Object(l.b)(function(e,t){return{}},function(e){return{setDrawingPadEdge:function(t,n){return e(Object(u.Ob)(t,n))}}})(function(e){var t=e.isControl,n=e.containerRef,u=e.pad,l=e.setDrawingPadEdge,f=e.fx,d=e.rack,m=e.id,b=void 0===m?f.id:m,g=e.coords,p=e.nodeRef,v=e.outputNumber,E="effect-output-"+b;void 0!==v&&(E="effect-output-"+v+"-"+b);var O=Object(r.useRef)(void 0),k=Object(s.a)({ref:O}),h=k.onContextMenu,j=k.dropdownPos,w=k.setDropdownPos,S=Object(r.useRef)({x:0,y:0});Object(r.useEffect)(function(){if(g&&p&&p.current){var e=g.x,t=g.y;e+=p.current.offsetWidth+20,S.current.x=e,S.current.y=t}},[g]);var y=Object(r.useCallback)(function(e){n.current.getBoundingClientRect();var r=e.clientX,a=e.clientY,c=(u.state.spatial.edgesPadding,{effect:t?f.inputNode:f,outputNumber:v,rack:d,x1:r,y1:a,x2:r,y2:a});e.stopPropagation(),l(u.subSequence.id,c)},[]),C=f.getEffectType&&f.getEffectType()===c.c,q={};return f.numberOfOutputs>1&&(q.top=30+20*v+"%"),a.a.createElement("div",{ref:O,style:q,onContextMenu:h,id:E,onMouseDown:y,className:"effect-output"},!t&&a.a.createElement(i.a,{isMidi:C,setDropdownPos:w,outputNumber:v,dropdownPosRef:S,effectOptions:C?o.e:Object(o.a)(),initializeEffect:C?o.c:o.b,dropdownPos:j,effect:f,node:u}))})},2638:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(2),a=n.n(r),c=n(12),o=n(30),s=function(){var e=Object(c.a)(a.a.mark(function e(){var t,n,r,c,s,i,u,l,f;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.eth.getBlockNumber();case 2:t=e.sent,n=null,r=new Date,c=r.getDate(),s=r.getMonth(),t-=6e3*c,i=s,u={},l=0;case 11:if(!(l<12)){e.next=23;break}return e.next=14,o.a.eth.getBlock(t);case 14:n=e.sent,r=new Date(1e3*n.timestamp),f=new Date(r.getFullYear(),r.getMonth(),0).getDate(),u[i--]=t,t-=6600*f;case 20:l++,e.next=11;break;case 23:return e.abrupt("return",u);case 24:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},2710:function(e,t,n){"use strict";var r=n(8),a=n(0),c=n.n(a),o=n(2635),s=n(542),i=n(543),u=n(2636),l=n(5),f=n(717),d=n(1360),m=n(786),b=n(305),g=n(31),p=n(555),v=n(222),E=n(788),O=n(1069),k=n(13),h=new g.a,j=Object(k.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.onDeleteEffect,n=e.sequencerEngine,r=e.instrumentPart,o=Object(a.useState)(void 0),s=Object(l.a)(o,2),i=s[0],u=s[1],g=Object(a.useState)(void 0),k=Object(l.a)(g,2),j=k[0],w=k[1],S=r.effect,y=r.instrument,C=r.track,q=r.type,x=r.subType,M="",N=c.a.createElement("div",{className:"pulled-header"},y&&q===v.d&&c.a.createElement("div",{className:"lfo-name"},"LFO ",y.number),y&&"MODULE_ENVELOPE"===q&&c.a.createElement("div",{className:"lfo-name"},"Envelope ",y.number),C&&c.a.createElement("div",{style:{backgroundColor:h.getColorForTrack(C)},className:"effect-from"},C.envelopesTrack?C.name:C.trackNumber+1+". "+C.getName()),c.a.createElement("div",{onClick:t,className:"delete-button"},"-")),D=h.getColorForTrack(C);if(q===v.e)M=c.a.createElement(p.a,{isDraggable:!1,setOscillatorDetails:u,oscillatorDetails:i,showWaveform:j,setShowWaveform:w,color:D,sequencerEngine:n,instrument:y});else if("SYNTH_ENVELOPE"===q){var R;"Amp"===x?R=y.ampEnvelope:"A"===x?R=y.oscillatorNodes[1].ampEnvelope:"B1"===x?R=y.oscillatorNodes[2].ampEnvelope:"B2"===x&&(R=y.oscillatorNodes[3].ampEnvelope),console.log("subtype = ",x),M=c.a.createElement(b.a,{instrument:y,width:200,fillColor:D,lineColor:D,sequencerEngine:n,envelope:R,name:x,hasRelease:!0,hasLevel:!1})}else"MODULE_ENVELOPE"===q?M=c.a.createElement(b.a,{name:"Env "+x,envelope:y,width:200,hasRelease:!0,hasLevel:!1,sequencerEngine:n}):q===v.f?M=c.a.createElement(O.a,{effect:S}):q===v.c?M=c.a.createElement(E.a,{isDraggable:!1,effect:S}):q===v.b?M=c.a.createElement(m.a,{isDraggable:!1,effect:S}):q===v.a?M=c.a.createElement(d.a,{isDraggable:!1,color:D,sequencerEngine:n,instrument:y}):q===v.d&&(M=c.a.createElement(f.a,{isDraggable:!1,hideName:!0,lfo:y,sequencerEngine:n}));return c.a.createElement("div",{className:"pulled-instrument"},N,M)}),w=n(707),S=n(79),y=n(403),C=n(300),q=n(545);n(2714),t.a=Object(k.b)(function(e,t){return{coords:e.windows.windowPositions[t.fx.id],isCollapsed:e.effects.effectCollapsed[t.fx.id],numberOfOutputs:t.fx.numberOfOutputs,isSelected:e.windows.selectedElements[t.fx.id]}},function(e){return{}})(function(e){var t=e.fx,n=e.scale,l=e.containerRef,f=e.sequencerEngine,d=e.setSize,m=e.elements,b=e.size,g=e.sizeRef,p=e.setOrdering,v=e.ordering,E=e.rack,O=e.coords,k=e.isSelected,h=e.onDelete,x=e.showDelete,M=e.isCollapsed,N=e.pad,D=e.isStatic,R=Object(a.useRef)(void 0),z=Object(w.a)({scale:n,ref:R,sequencerEngine:f,sizeRef:g,windowPosition:O,containerRef:l,size:b,setSize:d,elements:m,element:t,expand:M,setOrdering:p,ordering:v}),P=z.style,T=z.onContextMenu,A=z.isDragging,L=z.onMouseDown,I=z.onMouseUp,U=(z.setCoords,"pulled-effect");A&&(U+=" dragging"),k&&(U+=" selected");var F=Object(r.a)({},P);O&&(F.left=O.x,F.top=O.y);var X=t.numberOfOutputs||1,_=new Array(X).fill(0).map(function(e,t){return t});return[c.a.createElement("div",{key:1,style:F,onContextMenu:T,onMouseDown:D?function(){return[]}:L,onMouseUp:D?function(){return[]}:I,ref:R,className:U},t.instrument?c.a.createElement(j,{onDeleteEffect:h,showStar:!0,sequencerEngine:f,instrumentPart:t}):t.getEffectType()===S.a?c.a.createElement(y.a,{showDelete:x,isDraggable:!1,sequencerEngine:f,showStar:!0,featured:!0,track:t.track,compact:!0,instrument:!0,onDeleteEffect:h,effect:t,send:void 0}):t.getEffectType()===S.b?c.a.createElement(q.a,{featured:!0,isDraggable:!1,sequencerEngine:f,showStar:!0,onDeleteEffect:h,effect:t,track:t.track,onEffectsChange:function(){return[]}}):c.a.createElement(C.a,{showDelete:x,isDraggable:!1,featured:!0,sequencerEngine:f,track:t.track,showStar:!0,compact:!0,instrument:!0,onDeleteEffect:h,effect:t,send:void 0}),N&&c.a.createElement(o.a,{containerRef:l,fx:t,pad:N}),N&&_.map(function(e){return c.a.createElement(u.a,{nodeRef:R,rack:E,coords:O,outputNumber:e,containerRef:l,fx:t,pad:N})}),c.a.createElement(s.a,{effect:t}),c.a.createElement(i.a,{subSequence:t.track&&t.track.subSequence,containerRef:l,scale:n,effect:t}))]})},2718:function(e,t,n){"use strict";var r=n(5),a=n(0),c=n.n(a),o=n(30),s=n(65),i=n(2545),u=n(13),l=n(225),f=n.n(l),d=n(43),m=n(33),b=n(76),g={},p=function(e){var t=e.annotation,n=e.style,i=Object(a.useState)(""),u=Object(r.a)(i,2),l=u[0],f=u[1],b=Object(a.useState)(""),p=Object(r.a)(b,2),v=p[0],E=p[1];return Object(a.useEffect)(function(){var e=o.a.utils.fromAscii(t.annotationData),n=Object(s.a)(e);g[n]?f(g[n]):d.a.getJson(n).then(function(e){g[n]=e,f(e)}),m.a.users.getUserName(t.address).then(function(e){return E(e)})},[t,f,E]),c.a.createElement("div",{style:n,className:"annotation"},c.a.createElement("div",{className:"author"},v,":"),c.a.createElement("div",{className:"content"},l))};t.a=Object(u.b)(function(e,t){return{numPending:e.transactions.pendingTransactions.length}},null)(function(e){var t=e.work,n=e.contentId,o=void 0===n?t&&t.newSequence:n,s=e.numPending,u=e.linkType,l=void 0===u?i.b:u,d=e.color,g=Object(a.useState)(""),v=Object(r.a)(g,2),E=v[0],O=v[1],k=Object(a.useState)(!1),h=Object(r.a)(k,2),j=(h[0],h[1]),w=Object(a.useState)([]),S=Object(r.a)(w,2),y=S[0],C=S[1],q=Object(a.useCallback)(function(e){O(e.target.value)},[O]),x=Object(a.useCallback)(function(){m.a.xanadu.newAnnotationContent(l,o,E).then(function(e){return j(!0)}),O(""),j(!0)},[o,E,O,j]);Object(a.useEffect)(function(){o&&m.a.xanadu.getAnnotations(l,o).then(function(e){C(e)})},[o,C,s]);var M={};return d&&(M.backgroundColor=d),c.a.createElement("div",null,c.a.createElement(b.g,{style:M,className:"annotation-text",onChange:q,type:"textarea",value:E}),c.a.createElement("div",{style:M,onClick:x,className:"submit-button"},"Annotate"),c.a.createElement("div",{style:M,className:"annotations"},c.a.createElement(f.a,{sizeUnit:"px",size:10,color:"#42f4f1",loading:s>0}),y.map(function(e){return c.a.createElement(p,{style:M,key:e.annotationData,annotation:e})})))})},2723:function(e,t,n){"use strict";var r=n(9),a=n(0),c=n.n(a),o=n(13);n(2804);function s(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw c}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u={0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"};t.a=Object(o.b)(function(e,t){return{}},function(e){return{}})(function(e){var t,n=e.currentMonth,a=e.onClickMonth,o=e.months,i=((new Date).getMonth(),(new Date).getFullYear()),l=[],f=Object.keys(o).map(function(e){return parseInt(e)}).sort(function(e,t){return t-e}),d=s(f=[].concat(Object(r.a)(f),Object(r.a)(f)).slice(0,12));try{for(d.s();!(t=d.n()).done;){var m=t.value;l.push({number:m,month:u[(12+m)%12],isCurrent:m===n}),m%12===0&&l.push({number:m-1,year:--i})}}catch(b){d.e(b)}finally{d.f()}return c.a.createElement("div",{className:"months"},l.map(function(e){var t=e.month,n=e.number,r=e.isCurrent,o=e.year;return o?c.a.createElement("div",{onClick:function(){return a(n)},className:"month year"},o):c.a.createElement("div",{onClick:function(){return a(n)},className:r?"month current":"month"},t)}))})},2729:function(e,t,n){"use strict";var r=n(9),a=n(81),c=n(0),o=n.n(c),s=(n(643),n(2789)),i=(n(1077),n(2730),n(2710)),u=n(13);t.a=Object(u.b)(function(e,t){var n=t.track.effectRack&&t.track.effectRack.id;return{effects:e.pads.trackMidiEffects[t.track.id],isCollapsed:e.effects.effectCollapsed[n]}},function(e){return{}})(function(e){var t=e.track,n=(e.effects,e.isCollapsed),u=Object(a.a)(e,["track","effects","isCollapsed"]),l=Object(c.useCallback)(function(e){t.effectRack.deleteEffect(e),t.updateMidiEffectsRedux()},[]);return t.effectRack&&t.zObject&&!n?[o.a.createElement(s.a,Object.assign({isMidi:!0,key:5,pad:t},u)),,].concat(Object(r.a)(t.effectRack.effects.map(function(e){return o.a.createElement(i.a,Object.assign({onDelete:l,key:e.id,fx:e,rack:t.effectRack,showDelete:!0,sequencerEngine:t.sequencerEngine,pad:t},u))}))):[]})},2730:function(e,t,n){"use strict";var r=n(8),a=n(81),c=n(0),o=n.n(c),s=n(102),i=n(31),u=n(199),l=n(1150),f=n(259),d=n(2635),m=n(2636),b=n(707),g=n(10),p=n(13),v=new i.a;t.a=Object(p.b)(function(e,t){return{coords:e.windows.windowPositions[t.pad.effectRack.id],isCollapsed:e.effects.effectCollapsed[t.pad.effectRack.id],isSelected:e.windows.selectedElements[t.pad.effectRack.id],isMacroMapping:e.effects.isMacroMapping,hidden:e.spatial.hiddenObjects[t.pad.id]}},function(e,t){return{setParameterToMap:function(t){return e(Object(g.Xd)(t))},setIsCollapsed:function(n){return e(Object(g.Vb)(t.pad.effectRack.id,n))}}})(function(e){var t=e.pad,n=e.setIsCollapsed,i=e.isCollapsed,g=e.coords,p=e.isSelected,E=Object(a.a)(e,["pad","setIsCollapsed","isCollapsed","coords","isSelected"]),O=Object(c.useRef)(void 0),k=Object(c.useRef)(void 0),h=t.fxMacro.macroParameter;Object(c.useEffect)(function(){n(t.effectRack.isCollapsed)},[]),Object(c.useEffect)(function(){t.effectRack.isCollapsed=i},[i]);var j=Object(f.a)({ref:O}),w=j.onContextMenu,S=j.dropdownPos,y=j.setDropdownPos,C=Object(c.useRef)({x:0,y:0}),q=Object(b.a)(Object(r.a)({ref:O,element:t.effectRack,windowPosition:g,sequencerEngine:t.sequencerEngine},E)),x=q.style,M=(q.isDragging,q.onMouseDown),N=q.onMouseUp;q.setCoords;Object(c.useEffect)(function(){g&&(C.current={x:g.x+100,y:g.y+50})},[g]);var D=Object(c.useCallback)(function(e){e.stopPropagation(),E.isMacroMapping&&(h.isMapped||E.setParameterToMap(h));var r=(new Date).getTime();e.stopPropagation(),r-k.current<=450&&(t.effectRack.isCollapsed=!i,n(!i)),k.current=r},[E.isMacroMapping,n,i]),R="pad-effect-control";i||(R+=" expanded"),p&&(R+=" selected");var z=Object(r.a)({},x,{backgroundColor:v.getColorForHash(t.effectRack.id)});return g&&(z.left=g.x,z.top=g.y),E.isMacroMapping&&(R+=" plane-mapping"),E.hidden?"":[o.a.createElement("div",{onClick:D,key:1,onContextMenu:function(e){w(e),q.onContextMenu(e)},onMouseDown:M,onMouseUp:N,ref:O,style:z,className:R},o.a.createElement("div",{className:"control-inner"},o.a.createElement(u.a,{color:"white",name:"",parameter:t.fxMacro.macroParameter}),o.a.createElement(l.a,{allowSendsOnly:!0,effectOptions:s.a,initializeEffect:s.b,addToBack:!1,dropdownPosRef:C,setDropdownPos:y,dropdownPos:S,node:t}),o.a.createElement(d.a,{containerRef:E.containerRef,pad:t,fx:t.effectRack}),!i&&o.a.createElement(m.a,{outputNumber:0,isControl:!0,containerRef:E.containerRef,pad:t,fx:t.effectRack}),o.a.createElement("div",{className:"control-name"},"FX")))]})},2731:function(e,t,n){"use strict";var r=n(5),a=n(0),c=n.n(a),o=n(2599),s=(n(321),n(1121),n(10)),i=n(13);n(2822);t.a=Object(i.b)(function(e,t){return{collapsed:e.pads.modulesCollapsed[t.subSequence.id],isCurrent:t.subSequence===t.subSequence.sequencerEngine.currentSubSequence}},function(e,t){return{setCollapsed:function(n){return e(Object(s.ud)(t.subSequence.id,n))},setModuleColor:function(n){return e(Object(s.vd)(t.subSequence.id,n))}}})(function(e){var t=e.subSequence,n=e.collapsed,s=e.isCurrent,i=e.setCollapsed,u=e.setModuleColor,l=Object(a.useState)(t.color),f=Object(r.a)(l,2),d=(f[0],f[1]),m=Object(a.useState)(!1),b=Object(r.a)(m,2),g=(b[0],b[1],Object(a.useCallback)(function(e){t.color=e.hex,d(e.hex),u(e.hex)},[t,d]),"module-tab grids-name");s&&(g+=" selected");var p=Object(a.useCallback)(function(){t.sequencerEngine.switchToSubSequence(t.id)},[t]);return c.a.createElement("div",{onMouseDown:p,className:g},t.name,!n&&c.a.createElement(o.a,{subSequence:t}),c.a.createElement("div",{onClick:function(){return i(!n)},className:"collapse-button"},c.a.createElement("div",{className:n?"arrow-left":"arrow-down"})))})},2732:function(e,t,n){"use strict";var r=n(9),a=n(81),c=n(0),o=n.n(c),s=(n(643),n(2789)),i=(n(1077),n(2730)),u=n(2710),l=n(13);t.a=Object(l.b)(function(e,t){return{effects:e.pads.padEffects[t.pad.id],isCollapsed:e.effects.effectCollapsed[t.pad.effectRack.id]}},function(e){return{}})(function(e){var t=e.pad,n=e.effects,l=e.isCollapsed,f=Object(a.a)(e,["pad","effects","isCollapsed"]),d=Object(c.useCallback)(function(e){console.log("on delete fx =",e),t.effectRack.deleteEffect(e),t.updateEffectRedux()},[]);return t.effectRack&&n&&0!==n.length?l?[o.a.createElement(i.a,Object.assign({key:0,pad:t},f))]:[o.a.createElement(i.a,Object.assign({key:0,pad:t},f)),o.a.createElement(s.a,Object.assign({key:5,pad:t},f)),,].concat(Object(r.a)(t.effectRack.effects.map(function(e){return o.a.createElement(u.a,Object.assign({onDelete:d,key:e.id,rack:t.effectRack,fx:e,showDelete:!0,sequencerEngine:t.sequencerEngine,pad:t},f))}))):[]})},2733:function(e,t,n){"use strict";var r=n(8),a=n(0),c=n.n(a),o=(n(643),n(963)),s=n(542),i=n(543),u=n(707),l=n(10),f=n(1170),d=n(13);t.a=Object(d.b)(function(e,t){return{coords:e.windows.windowPositions[t.pad.id],hidden:e.spatial.hiddenObjects[t.pad.id],isSelectedZObject:e.zobject.selectedZObject===t.pad,isSelected:e.windows.selectedElements[t.pad.id],isCurrent:t.pad.subSequence===t.pad.sequencerEngine.currentSubSequence,padsExpand:e.pads.padsExpand}},function(e){return{setSelectedZObject:function(t){return e(Object(l.zf)(t))}}})(function(e){var t=e.hidden,n=e.setOrdering,l=e.ordering,d=e.scale,m=e.pad,b=e.scrollContainer,g=e.elements,p=e.sizeRef,v=e.size,E=e.setSize,O=e.isCurrent,k=e.padsExpand,h=e.coords,j=e.isSelected,w=(e.setSelectedZObject,e.isSelectedZObject,Object(a.useRef)(void 0)),S=Object(u.a)({scale:d,ref:w,sequencerEngine:m.sequencerEngine,windowPosition:h,sizeRef:p,containerRef:b,size:v,setSize:E,elements:g,element:m,isPad:!0,expand:k,setOrdering:n,ordering:l}),y=S.style,C=S.onContextMenu,q=S.onMouseDown,x=S.onMouseUp;S.setCoords;Object(a.useEffect)(function(){h&&(m.x=h.x,m.y=h.y)},[h]);var M="pulled-pad";O&&(M+=" current"),j&&(M+=" selected");var N=Object(r.a)({},y);return h&&(N.left=h.x,N.top=h.y),k&&k.pad===m&&(M+=" expanded"),t?"":c.a.createElement("div",{style:N,onMouseDown:function(e){q(e)},onContextMenu:C,onMouseUp:x,ref:w,className:M},c.a.createElement(f.a,{isPulled:!0,scrollContainer:b,pad:m}),c.a.createElement(o.a,{isRoot:!0,useClick:!0,hideNumber:!0,sequencerEngine:m.sequencerEngine,node:m}),c.a.createElement(s.a,{effect:m}),c.a.createElement(i.a,{subSequence:m.subSequence,containerRef:b,effect:m}))})},2734:function(e,t,n){},2782:function(e,t,n){"use strict";var r=n(8),a=n(5),c=n(0),o=n.n(c),s=n(9),i=n(48),u=n(42),l=n.n(u),f=n(102),d=n(300),m=n(13),b=Object(m.b)(function(e,t){return{pulledEffects:e.effects.pulledEffects}},function(e){return{}})(function(e){var t=e.track,n=e.pulledEffects,r=Object(c.useState)(t.midiEffects.effects),u=Object(a.a)(r,2),m=u[0],b=u[1],g=Object(c.useCallback)(function(e){var n=Object(f.c)(e,t);t.sequencerEngine.operationManager.dispatch(Object(i.b)(n,t)),b(Object(s.a)(t.midiEffects.effects))},[b,m,t]),p=Object(c.useCallback)(function(){b(Object(s.a)(t.midiEffects.effects))},[m,b]);return o.a.createElement("div",{className:"effects-overview"},m.map(function(e){return o.a.createElement(d.a,{sequencerEngine:t.sequencerEngine,isPulled:n.includes(e),key:e.id,onDeleteEffect:p,effect:e,track:t,tracks:t.sequencerEngine.tracks,onEffectsChange:function(){return[]}})}),o.a.createElement("div",{className:"add-effect-type"},o.a.createElement(l.a,{className:"delay-time-dropdown",option:void 0,options:f.e,onChange:function(e){return g(e.value)},placeholder:"MIDI FX"})))}),g=Object(m.b)(function(e,t){var n=t.pad.sequencerEngine.tracks[e.mix.selectedTrack];return{selectedTrack:e.mix.selectedTrack,loaded:n&&n.getSampler(0),tracks:t.pad.tracks}},function(e){return{}})(function(e){e.div,e._track,e.pad,e.selectedTrack}),p=n(791),v=n(68),E=n(60),O=Object(m.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.track,n=Object(c.useRef)(void 0),r="";return t.getTrackType()===E.f?r=o.a.createElement(g,{div:n,pad:t,_track:t}):t.getTrackType()===E.b&&t.getInstrumentType()===v.f&&(r=o.a.createElement(p.a,{sequencerEngine:t.sequencerEngine,track:t,instrument:t.instrument})),o.a.createElement("div",{ref:n,className:"instrument-overview"},r)}),k=n(403),h=Object(m.b)(function(e,t){return{pulledEffects:e.effects.pulledEffects}},function(e){return{}})(function(e){var t=e.track,n=e.pulledEffects,r=Object(c.useState)(t.effects),u=Object(a.a)(r,2),d=u[0],m=u[1],b=Object(c.useCallback)(function(e){var n=Object(f.b)(e,t.sequencerEngine);n.enable(!0),t.sequencerEngine.operationManager.dispatch(Object(i.b)(n,t)),m(Object(s.a)(t.effects))},[m,d,t]),g=Object(c.useCallback)(function(){m(Object(s.a)(t.effects))},[d,m]);return o.a.createElement("div",{className:"effects-overview"},d.map(function(e){return o.a.createElement(k.a,{sequencerEngine:t.sequencerEngine,isPulled:n.includes(e),key:e.id,onDeleteEffect:g,effect:e,track:t,tracks:t.sequencerEngine.tracks,onEffectsChange:function(){return[]}})}),o.a.createElement("div",{className:"add-effect-type"},o.a.createElement(l.a,{className:"delay-time-dropdown",option:void 0,options:f.a,onChange:function(e){return b(e.value)},placeholder:"Audio FX"})))}),j=n(758),w=n(10),S=Object(m.b)(function(e,t){var n=t.track;n&&n.tracks&&n.tracks[0]&&(n=n.tracks[0].track);var r=e.mix.selectedTrack===t.track.trackNumber&&t.track.sequencerEngine.currentSubSequence===t.track.subSequence,a=(e.tracks.trackIsEnabled[t.track.subSequence.id]||{})[t.track.id];return{isSelected:r,id:void 0===n?0:void 0!==n.sample&&void 0!==n.sample.getId()?n.sample.getId():n.presetName||n.getName(),isEnabled:a,numEffects:n.effects.length}},function(e){return{setTrackDragging:function(t){return e(Object(w.Xg)(t))}}})(function(e){var t=e.track,n=e.isSelected,r=e.isEnabled,s=e.setTrackDragging,i=e.setExpandTrack,u=e.numEffects,l=Object(j.a)(t,t.sample),f=Object(c.useState)(void 0),d=Object(a.a)(f,2),m=d[0],g=d[1],p="tr-overview";n&&(p+=" selected"),Object(c.useEffect)(function(){i(m?{id:t.id,numEffects:u}:void 0)},[u,m,i,t]);var v=Object(c.useCallback)(function(){t.sequencerEngine.selectTrack(t.trackNumber)},[t]);return o.a.createElement("div",{onClick:v,className:p},o.a.createElement("div",{className:"tr-inner"},o.a.createElement("div",{className:"track-number"},t.trackNumber+1),o.a.createElement("div",{onClick:function(){return t.toggleEnabled()},className:r?"dot enabled":"dot"}),o.a.createElement("div",{onClick:function(){return g("M_FX"===m?void 0:"M_FX")},className:"M_FX"===m?"m-fx showing":"m-fx"},"m. fx"),o.a.createElement("img",{className:"right-arr",src:"/right-arrow.svg"}),o.a.createElement("div",{draggable:!0,onMouseDown:function(e){return e.stopPropagation()},onDragStart:function(e){e.stopPropagation(),s(t)},onDragOver:function(e){return e.preventDefault()},onClick:function(){return g("INST"===m?void 0:"INST")},style:{backgroundColor:t.color},className:"INST"===m?"inst showing":"inst"},l),o.a.createElement("img",{className:"right-arr",src:"/right-arrow.svg"}),o.a.createElement("div",{onClick:function(){return g("A_FX"===m?void 0:"A_FX")},className:"A_FX"===m?"a-fx showing":"a-fx"},"fx")),"INST"===m&&o.a.createElement(O,{track:t}),"A_FX"===m&&o.a.createElement(h,{track:t}),"M_FX"===m&&o.a.createElement(b,{track:t}))}),y=n(707);n(2821),Object(m.b)(function(e,t){return{coords:e.windows.windowPositions[t.subSequence.id],numTracks:t.subSequence.tracks&&t.subSequence.tracks.length}},function(e){return{}})(function(e){var t=e.setOrdering,n=e.ordering,s=e.scale,i=e.subSequence,u=e.scrollContainer,l=e.elements,f=e.sizeRef,d=e.size,m=e.setSize,b=(e.isCurrent,e.padsExpand,e.coords),g=(e.isSelected,Object(c.useRef)(void 0)),p=Object(c.useState)(void 0),v=Object(a.a)(p,2),E=v[0],O=v[1],k=Object(y.a)({scale:s,ref:g,sequencerEngine:i.sequencerEngine,windowPosition:b,sizeRef:f,expand:E?i.tracks.length+E.id+E.numEffects:i.tracks.length,containerRef:u,size:d,setSize:m,elements:l,element:i,setOrdering:t,ordering:n}),h=k.style,j=(k.onContextMenu,k.onMouseDown),w=k.onMouseUp;k.setCoords;Object(c.useEffect)(function(){b&&(i.x=b.x,i.y=b.y)},[b]);var C=Object(r.a)({},h);return b&&(C=Object(r.a)({},h,{top:b.y,left:b.x})),o.a.createElement("div",{style:C,className:"module-overview",onMouseDown:j,onMouseUp:w,ref:g},i.tracks.map(function(e){return o.a.createElement(S,{setExpandTrack:O,track:e})}))})},2783:function(e,t,n){"use strict";var r=n(9),a=n(8),c=n(5),o=n(0),s=n.n(o),i=(n(2782),n(1146)),u=n(2729),l=n(2731),f=n(229),d=n(1138),m=n(10),b=n(1137),g=n(2732),p=n(1145),v=n(2787),E=n(2733),O=(n(2597),n(709)),k=n(2560),h=n(102),j=n(259),w=n(227),S=n(136),y=n(2563),C=n(260),q=n(13);function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-40,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,r=arguments.length>3?arguments[3]:void 0,a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-40,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;return(e-t)/(n-t)}(e,t,n,r);return r*Math.pow(a,2)}var M=function(e,t){return Math.abs(e.y-t.y)},N=Object(q.b)(function(e,t){return{playing:t.track.notesTriggered&&Object.keys(t.track.notesTriggered).length>0,notesTriggered:t.track.notesTriggered,disabled:t.track.disabled,volume:t.track.sequencerEngine.playing?t.track.pattern.volume:t.track.volumeParameter.get()}},function(e){return{setParameterSliderDown:function(t){return e(Object(m.Wd)(t))}}})(function(e){var t=e.track,n=e.playing,r=e.notesTriggered,a=e.setParameterSliderDown,i=e.toggled,u=e.setSelectedTrack,l=t.disabled,f=Object(o.useState)(!0),d=Object(c.a)(f,2),m=d[0],b=(d[1],Object(o.useRef)(void 0)),g=Object(o.useState)(void 0),p=Object(c.a)(g,2),v=p[0],E=p[1],O=Object(o.useState)(!1),k=Object(c.a)(O,2),h=k[0],j=k[1],w=Object(o.useState)(!1),S=Object(c.a)(w,2),y=S[0],q=S[1],N=Object(o.useRef)(0),D="grid";n&&(D+=" pressed"),l&&(D+=" disabled");var R={},z=r&&Object.keys(r)[0];z&&(z=parseInt(z),R.filter="hue-rotate("+4*z+"deg)");var P=Object(o.useCallback)(function(e){if(h){e.preventDefault(),e.stopPropagation();var n=e.clientY;e.touches&&(n=e.touches[0].clientY);var r=b.current.getBoundingClientRect(),a=b.current.offsetHeight,c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-40,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,r=arguments.length>3?arguments[3]:void 0,a=(e=Math.min(Math.max(0,e),r))/r,c=Math.pow(a,.5);return t+(n-t)*c}(a-(n-r.top),-65,6,a);t.setVolume(c,!1,!1),q({x:e.clientX,y:e.clientY})}},[q,h,t]),T={height:x(t.volumeParameter.get(),-65,6,b.current&&b.current.offsetHeight)},A=Object(o.useCallback)(function(e){i?u(t):(a(t.volumeParameter),j(!0),E({x:e.clientX,y:e.clientY}),N.current=(new Date).getTime())},[j,E,i,u,t]),L=Object(o.useCallback)(function(e){var n=(new Date).getTime();y&&M(v,y),(!y||M(v,y)<=8)&&n-N.current<250&&(t.disabled=!t.disabled),q(void 0),j(!1),a(void 0)},[q,j,y,v]);return Object(o.useEffect)(function(){b.current.addEventListener("touchmove",P,{capture:!0})},[P,q,h,t]),s.a.createElement("div",{ref:b,onMouseMove:P,onMouseDown:A,onTouchStart:A,onMouseUp:L,onMouseLeave:function(){j(!1),q(void 0),a(void 0)},style:R,className:D},m?s.a.createElement(C.a,{onMouseDown:function(e){return e.stopPropagation()},showPresetName:!0,track:t}):"",s.a.createElement("div",{className:h?"volume-indicator":"volume-indicator skinny",style:T}))});n(2734);function D(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw c}}}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=Object(q.b)(function(e,t){return{pulledEffects:e.effects.pulledEffects,pulledSequencers:e.pads.sequencers,numTracks:t.subSequence.tracks&&t.subSequence.tracks.length,collapsed:e.pads.modulesCollapsed[t.subSequence.id]}},function(e){return{setPulledEffects:function(t){return e(Object(m.Ae)(t))},setSelectedPulledElements:function(t){return e(Object(m.rf)(t))},setSize:function(t){return e(Object(m.wd)(5,t))}}})(function(e){var t=e.setSize,n=e.isExplore,m=e.scale,C=(e.showEffects,e.pulledEffects),q=e.setPulledEffects,x=e.setSelectedPulledElements,M=e.toggled,R=e.setSelectedTrack,z=e.subSequence,P=e.collapsed,T=Object(o.useRef)(void 0),A=Object(o.useRef)({}),L=Object(j.a)({ref:T}),I=L.onContextMenu,U=L.dropdownPos,F=(L.setDropdowPos,Object(O.a)({ref:T})),X=F.sizeRef,_=F.ordering,H=F.setOrdering,B=Object(o.useRef)(U),W={width:500,height:500},Y=Object(k.a)({ref:T,elements:A,subSequence:z,size:W}).arrangeWindows,J=Object(o.useState)(void 0),V=Object(c.a)(J,2),G=V[0],Z=V[1],Q=Object(f.a)({containerRef:T,scale:m}).getXY,$=Object(d.a)({elements:A}).getSelection,K=Object(o.useCallback)(function(e){var t=Q(e),n=t.x,r=t.y;Z({x1:n,y1:r,x2:n,y2:r})},[Z,m]),ee=Object(o.useCallback)(function(e){var t=Q(e),n=t.x,r=t.y;Z(Object(a.a)({},G,{x2:n,y2:r}))},[G,Z,m]),te=Object(o.useCallback)(function(e){if(G&&G.x2-G.x1>1){var t,n={},r=D($(G));try{for(r.s();!(t=r.n()).done;)n[t.value.id]=!0}catch(a){r.e(a)}finally{r.f()}x(n)}G&&Z(void 0)},[G,Z]);Object(o.useEffect)(function(){U&&(B.current=U)},[U]);var ne=[0,1,2],re=z.tracks,ae=void 0===re?[]:re;ae=ae.filter(function(e){return n||void 0===e.pad});var ce=Object(o.useCallback)(function(e){var t=Object(h.c)(e,z),n=B.current,a=n.x,c=n.y;t.x=a,t.y=c,z.midiEffects.addEffect(t),q([].concat(Object(r.a)(C),[t]))},[z,C]),oe=Object(o.useCallback)(function(e){z.sequencerEngine.switchToSubSequence(z.id)},[z]),se=Object(o.useCallback)(function(){var e=z.createSequencer(),t=B.current,n=t.x,r=t.y;e.x=n,e.y=r},[z]),ie=Object(o.useCallback)(function(){var e=z.createPad(),t=B.current,n=t.x,r=t.y;e.x=n,e.y=r},[z]);if(!z||!z.tracks)return[];var ue=s.a.createElement("div",null,!n&&s.a.createElement(b.a,{selection:G,scale:m,elements:A,containerRef:T}),s.a.createElement(w.a,{className:"midi-context",dropdownPos:U?{x:U.x/m,y:U.y/m}:void 0},s.a.createElement(S.a,{onMouseDown:se},"New Sequencer"),s.a.createElement(S.a,{onMouseDown:ie},"New Pad"),s.a.createElement(S.a,{onMouseDown:Y},"Arrange Windows"),s.a.createElement("div",{className:"context-divider"}),h.e.map(function(e){var t=e.label,n=e.value;return s.a.createElement(S.a,{onMouseDown:function(){return ce(n)}},t)})),n&&s.a.createElement("div",{className:"grid-rows"},[0,1,2,3,4].map(function(e){return s.a.createElement("div",{key:e,className:"grid-row"},ne.map(function(t){return ae[3*e+t]?s.a.createElement(N,{scale:m,toggled:M,setSelectedTrack:R,key:3*e+t,track:ae[3*e+t],row:e,col:t}):""}))})),s.a.createElement(y.a,{scale:m,sizeRef:X,setSize:t,size:W,ordering:_,setOrdering:H,playhead:!0,elements:A,containerRef:T,noWrapper:!0,sequencerEngine:z.sequencerEngine,subSequence:z}),!n&&z.pads.map(function(e){return s.a.createElement(E.a,{key:e.id,scale:m,size:W,ordering:_,setOrdering:H,setSize:t,sizeRef:X,elements:A,scrollContainer:T,pad:e})}),!n&&s.a.createElement(p.a,{containerRef:T,scale:m,subSequence:z}),!n&&z.tracks.map(function(e){return s.a.createElement(u.a,{scale:m,ordering:_,setOrdering:H,size:W,setSize:t,sizeRef:X,elements:A,containerRef:T,track:e})}),!n&&z.pads.filter(function(e){return e.effectRack}).map(function(e){return s.a.createElement(g.a,{scale:m,ordering:_,setOrdering:H,size:W,setSize:t,sizeRef:X,elements:A,containerRef:T,pad:e})}),!n&&z.sequencers.map(function(e){return s.a.createElement(v.a,{ordering:_,setOrdering:H,scrollContainer:T,scale:m,size:W,setSize:t,sizeRef:X,elements:A,sequencer:e})}));return s.a.createElement("div",{onClick:oe,onMouseDown:K,onMouseMove:ee,onMouseUp:te,onContextMenu:I,className:P?"grids collapsed":"grids not-collapsed"},s.a.createElement(l.a,{subSequence:z}),s.a.createElement("div",{ref:T,style:{},className:"grids-inner"},P?s.a.createElement(i.a,{subSequence:z}):ue))})},2787:function(e,t,n){"use strict";var r=n(8),a=n(5),c=n(0),o=n.n(c),s=n(963),i=n(713),u=n(1417),l=n(31),f=n(260),d=n(13),m=n(10),b=new l.a,g=Object(d.b)(function(e,t){var n=e.mix.selectedTrack===t.track.trackNumber,r=t.track,a=r;return r&&r.tracks&&r.tracks[0]&&(a=r.tracks[0].track),{trackId:r.id,id:a.presetName?a.presetName:void 0!==a.sample&&void 0!==a.sample.getId()?a.sample.getId():a.getName(),isSelectedTrack:n,resolution:e.sequencer.displayResolution,muted:e.tracks.trackMutes[t.track.id],trackLength:r.length}},function(e){return{setStepNumberDraggingFrom:function(t){return e(Object(m.Fg)(t))},setSelectedPianoRollSteps:function(t){return e(Object(m.of)(t))},setStepsSelection:function(t){return e(Object(m.Jg)(t))},mouseDown:function(t){return e(Object(m.n)(t))}}})(function(e){var t=e.track,n=e.id,r=e.isSelectedTrack,a=e.resolution,s=e.mouseDown,l=e.setSelectedPianoRollSteps,d=e.setStepsSelection,m=e.onTrackRendered,g=e.setStepNumberDraggingFrom,p=e.isHiding,v=e.setIsHiding,E=e.sequencerScale,O=e.muted,k=e.trackLength,h=Object(c.useRef)(void 0),j=b.getColorForTrack(t),w=b.brighten(void 0===n?"#353535c7":j,.64),S=t.sequencerEngine;Object(c.useEffect)(function(){setTimeout(function(){m(t,h)},100)},[k]);var y=Object(c.useCallback)(function(){s(!1);var e=S.store.getState().steps.stepsSelection;if(void 0!==e&&e.toStep-e.fromStep>0){var n=t.getEasyPattern().getSelectedSteps(e,a);0===n.length?l(void 0):l(n)}d(void 0),g(void 0)},[t,a]),C=Object(c.useCallback)(function(e){t.sequencerEngine.selectTrack(t.trackNumber)},[t]),q=Object(c.useCallback)(function(){v(p===t?void 0:t)},[p,v]),x=p===t;if(p&&p!==t)return[];var M="track";return p&&(M+=" hiding"),M+=r?" selected":" not-selected",O&&(M+=" muted"),o.a.createElement("div",{ref:h,style:{},onMouseDown:C,onMouseUp:y,className:M},o.a.createElement("div",{className:"track-inner"},o.a.createElement(f.a,{hasBorder:!0,isSelectedTrack:r,onMouseDown:function(e){e.stopPropagation(),C()},track:t,sample:t.sample,onClickThumbnail:q}),x?o.a.createElement(i.a,{color:w,track:t}):o.a.createElement(u.a,{sequencerScale:E,key:1,isSelectedTrack:r,sequencerEngine:t.sequencerEngine,store:t.sequencerEngine.store,trackNumber:t.trackNumber,id:n,trackColor:w,sample:t.sample,track:t,isMini:!0,trackData:t})),o.a.createElement("div",{style:{color:j},className:"delete-track-trash",onClick:function(){return t.sequencerEngine.deleteTrack(t.trackNumber)}},"x"))}),p=n(707),v=n(334);function E(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw c}}}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=Object(d.b)(function(e,t){return{coords:e.windows.windowPositions[t.sequencer.id],isSelected:e.windows.selectedElements[t.sequencer.id],tracks:t.sequencer.tracks,numTracks:t.sequencer.tracks.length,isStarred:e.effects.effectStarred[t.sequencer.id]}},function(e,t){return{setStarred:function(n){return e(Object(m.ac)(t.sequencer.id,n))},setTrackDragging:function(t){return e(Object(m.Xg)(t))},setSampleDragging:function(t){return e(Object(m.Me)(t))},setSampleTagDragging:function(t){return e(Object(m.Qe)(t))}}})(function(e){var t=e.sequencer,n=e.scale,i=(e.pad,e.scrollContainer),u=e.elements,l=e.sizeRef,f=e.size,d=e.setSize,m=e.isCurrent,b=e.setTrackDragging,O=e.numTracks,k=e.setOrdering,h=e.isStarred,j=e.setStarred,w=e.coords,S=e.ordering,y=e.setSampleDragging,C=e.setSampleTagDragging,q=e.isSelected,x=Object(c.useRef)(void 0),M=Object(c.useState)({}),N=Object(a.a)(M,2),D=N[0],R=N[1],z=Object(c.useState)(!1),P=Object(a.a)(z,2),T=P[0],A=P[1],L=Object(c.useRef)(void 0),I=Object(c.useRef)(void 0),U=Object(c.useCallback)(function(e,t){var n=Object(r.a)({},D);n[e.id]=t,R(n)},[D,R]),F=u?Object(p.a)({scale:n,ref:x,sizeRef:l,sequencerEngine:t.sequencerEngine,windowPosition:w,containerRef:i,size:f,setSize:d,elements:u,element:t,setOrdering:k,ordering:S}):{},X=F.setWindowScale,_=F.style,H=F.adjust,B=F.windowScale,W=F.onContextMenu,Y=F.onMouseDown,J=F.onMouseUp,V=(F.setCoords,F.startResizing);Object(c.useEffect)(function(){w&&(t.x=w.x,t.y=w.y)},[w]),Object(c.useEffect)(function(){u&&setTimeout(function(){if(L.current)if(L.current.clientHeight<L.current.scrollHeight){var e={x:I.current,y:L.current.scrollHeight+30};X(e)}else H(t.x,t.y)},50)},[O,X]),Object(c.useEffect)(function(){B&&(I.current=B.x)},[B]);var G=Object(c.useCallback)(function(e){e.stopPropagation(),t.sequencerEngine.switchToSubSequence(t.subSequence.id);var n=t.sequencerEngine.state,r=n.tracks.trackDragging,a=n.selector,c=a.sampleDragging,o=a.sampleTagDragging,s=t.subSequence,i=t.sequencerEngine;if((r||c||o)&&s.pads.length,r){var u,l=E(t.subSequence.sequencers);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(f!==t&&f.tracks.includes(r)){f.removeTrack(r);break}}}catch(m){l.e(m)}finally{l.f()}t.addTrack(r)}else if(c)i.addSound(c).then(function(e){return t.addTrack(e)});else if(o){var d=i.state.selector.sampleTagDragging;Array.isArray(d)||(d=[d]),i.searchForSounds(d,void 0,void 0,void 0,!0).then(function(e){return t.addTrack(e)})}b(void 0),y(void 0),C(void 0)},[]),Z=Object(r.a)({},_);B&&0!==B.x&&(T?(Z.minWidth=B.x,Z.minHeight=B.y):(Z.width=B.x,Z.height=B.y)),w&&(Z.left=w.x,Z.top=w.y);var Q=T||!B?1:B.x/420;1!=Q&&(t.scale=Q);var $="pulled-sequencer";return m&&($+=" current"),q&&($+=" selected"),o.a.createElement("div",{style:Z,onDrop:G,onContextMenu:W,onMouseDown:Y,onMouseUp:J,ref:x,className:$},o.a.createElement("div",{className:"pulled-header"},o.a.createElement("div",{className:"header-name"},"Sequencer"),o.a.createElement("div",{onClick:function(){return j(!h)},className:h?"starred star":"star"},o.a.createElement("span",null,"\u2606")),o.a.createElement("div",{onClick:function(){return t.dispose()},className:"delete-button"},"x")),o.a.createElement("div",{style:u&&Q&&!T?{width:Z.width/Q,maxHeight:Z.height/Q,transform:"scale("+.95*Q+")"}:{},ref:L,className:"inner-sequencer"},0===t.tracks.length&&o.a.createElement("div",{className:"drop-here"},"Drop Tracks Here"),t.tracks.map(function(e){return o.a.createElement(g,{onTrackRendered:U,sequencerScale:Q,setIsHiding:A,isHiding:T,key:e.id,scrollContainer:i,track:e})})),o.a.createElement("div",{onMouseDown:function(e){return V(v.b,e)},className:"top-left-edge"}),o.a.createElement("div",{onMouseDown:function(e){return V(v.a,e)},className:"top-right-edge"}),o.a.createElement("div",{onMouseDown:function(e){return V(v.d,e)},className:"bottom-left-edge"}),o.a.createElement("div",{onMouseDown:function(e){return V(v.c,e)},className:"bottom-right-edge"}),t.tracks.map(function(e,r){return o.a.createElement(s.a,{sequencerScale:Q,isMidi:!0,trackPositions:D,number:r,containerRef:i,sequencerEngine:t.sequencerEngine,scale:n,node:e})}))})},2789:function(e,t,n){"use strict";var r=n(8),a=n(81),c=n(0),o=n.n(c),s=n(102),i=new(n(31).a),u=n(1150),l=n(259),f=n(2635),d=(n(2636),n(707)),m=n(13);t.a=Object(m.b)(function(e,t){return t.pad.effectRack?{coords:e.windows.windowPositions[t.pad.effectRack.outputNode.id],isSelected:e.windows.selectedElements[t.pad.effectRack.outputNode.id]}:{}},function(e){return{}})(function(e){var t=e.isMidi,n=e.pad,m=e.isSelected,b=e.coords,g=Object(a.a)(e,["isMidi","pad","isSelected","coords"]),p=Object(c.useRef)(void 0),v=Object(l.a)({ref:p}),E=v.onContextMenu,O=v.dropdownPos,k=v.setDropdownPos,h=Object(c.useRef)({x:0,y:0}),j=Object(d.a)(Object(r.a)({ref:p,element:n.effectRack&&n.effectRack.outputNode,windowPosition:b,sequencerEngine:n.sequencerEngine},g)),w=j.style,S=(j.isDragging,j.onMouseDown),y=j.onMouseUp,C=(j.setCoords,function(e){var t=e.id;return{backgroundColor:i.getColorForHash(t)}}({id:n&&n.effectRack&&n.effectRack.id}));Object(c.useEffect)(function(){b&&(h.current={x:b.x+150,y:b.y+150})},[b]);var q="pad-effect-control speakers";m&&(q+=" selected");var x=Object(r.a)({},w,C);return t&&(delete x.backgroundColor,q+=" midi-speakers"),b&&(x.left=b.x,x.top=b.y),n&&n.effectRack?[o.a.createElement("div",{key:1,onContextMenu:function(e){E(e),j.onContextMenu(e)},onMouseDown:S,onMouseUp:y,ref:p,style:x,className:q},t?o.a.createElement("div",{className:"speaker-name"},"Out"):o.a.createElement("img",{draggable:!1,src:"/speakers.svg"}),t?"":o.a.createElement(u.a,{effectOptions:s.a,initializeEffect:s.b,dropdownPosRef:h,dropdownPos:O,setDropdownPos:k,node:n}),o.a.createElement(f.a,{isSpeaker:!0,id:n.effectRack.id+"-speakers",containerRef:g.containerRef,pad:n,fx:n.effectRack.outputNode}))]:""})},2804:function(e,t,n){},2821:function(e,t,n){},2822:function(e,t,n){}}]);